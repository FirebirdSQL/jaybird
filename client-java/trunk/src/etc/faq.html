<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE>FAQ</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.1  (Win32)">
	<META NAME="CREATED" CONTENT="20020909;21125147">
	<META NAME="CHANGED" CONTENT="20040417;23374988">
	<STYLE>
	<!--
		@page { size: 21cm 29.7cm }
		CODE { background: transparent }
		CODE.western { so-language:  }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<H1 ALIGN=CENTER><A NAME="top"></A><FONT SIZE=5 STYLE="font-size: 20pt">Frequently
Asked Questions</FONT></H1>
<P ALIGN=CENTER><FONT SIZE=4>JayBird JCA/JDBC Driver for Firebird</FONT></P>
<P ALIGN=CENTER>- Last Updated 01/13/04 -</P>
<TABLE WIDTH=90% BORDER=0 CELLPADDING=5 CELLSPACING=0>
	<TR>
		<TD WIDTH=40%>
			<P>&nbsp;</P>
		</TD>
		<TD>
			<P><A HREF="#1">1. How much of JDBC 2.0 is supported by JayBird?</A></P>
			<P><A HREF="#2">2. What parts of JDBC 2.0 are NOT Supported by
			JayBird</A></P>
			<P><A HREF="#3">3. Where do I get JayBird?</A></P>
			<P><A HREF="#4">4. How do I install JayBird?</A></P>
			<P><A HREF="#5">5. How do I use built-in Connection Pooling?</A></P>
			<P><A HREF="#6">6. How do I use JayBird in Java code?</A></P>
			<P><A HREF="#7">7. How do I use JayBird with JBoss?</A></P>
			<P><A HREF="#8">8. How do I use JayBird with Tomcat?</A></P>
			<P><A HREF="#9">9. How do I use JayBird with JBuilder?</A></P>
			<P><A HREF="#10">10. How do I use BLOBs with JayBird?</A></P>
			<P><A HREF="#11">11. How do I use different character sets with
			JayBird?</A></P>
			<P><A HREF="#12">12. How do I report bugs?</A></P>
			<P><A HREF="#13">13. How do I get sources from SourceForge using
			CVS?</A></P>
			<P><A HREF="#14">14. How can I participate in the development
			project?</A></P>
			<P><A HREF="#15">15. Where can I get help</A>?</P>
			<P><A HREF="#16">16. How do I join the Mailing List</A>?</P>
			<P><A HREF="#17">17. Are there any known bugs?</A></P>
			<P><A HREF="#18">18. What JVM and JARs are needed to use JayBird?</A></P>
			<P><A HREF="#19">19. Why isn't JayBird in one jar file?</A></P>
			<P><A HREF="#20">20. What are some common errors?</A></P>
			<P><A HREF="#21">21. Is there any compliance and performance
			information available?</A></P>
			<P><A HREF="#22">22. What is the history of JayBird?</A></P>
			<P><A HREF="#23">23. Frequently Asked Questions</A></P>
			<P><A HREF="#24">24. What tasks are left to do?</A></P>
			<P><A HREF="#25">25. Where can I submit corrections/additions to
			the Release Notes and FAQ?</A></P>
			<P><A HREF="#26">26. How do I turn off logging?</A></P>
			<P><A HREF="#27">27. How do I use JayBird with my development
			environment?</A></P>
			<P><A HREF="#28">28. Does JayBird provide any kind of security?</A></P>
			<P><A HREF="#29">29. Does JayBird support dialect 1, 2, and 3
			databases?</A></P>
			<P><A HREF="#30">30. Why don't arguments or ampersands (&amp;)
			work in my URL?</A></P>
			<P><A HREF="#31">31. Why do I see &quot;????&quot; instead of the
			correct characters?</A></P>
			<P><A HREF="#32">32. Can I use JayBird with Open Office?</A></P>
			<P><A HREF="#33">33. How do I create a database with JayBird?</A></P>
			<P><A HREF="#34">34. How do I use JayBird with Windows 95/98?</A></P>
			<P><A HREF="#35">35. Why does building the CVS code fail?</A></P>
			<P><A HREF="#36">36. Why aren't my connections ever returned to
			the pool?</A></P>
			<P><A HREF="#37">37. How do I use JayBird with DreamWeaver
			UltraDev?</A></P>
			<P><A HREF="#38">38. Why do I see a &quot;javax.naming.Referenceable&quot;
			error?</A></P>
			<P><A HREF="#39">39. How do I use stored procedures with JayBird?</A></P>
			<P><A HREF="#40">40. Why are VARCHAR Strings sometimes padded?</A></P>
			<P><A HREF="#41">41. Can I use CachedRowSet with JayBird?</A></P>
			<P><A HREF="#dpb">42. How do I pass Database Parameter Buffer
			(DPB) parameters?</A></P>
			<P><A HREF="#43">43.What is a good validation query to use with
			JayBird?</A></P>
			<P><A HREF="#44">44. How can I get the key of the record I just
			inserted?</A></P>
			<P><A HREF="#45">45. How do I set the default character set of a
			database?</A></P>
			<P><A HREF="#46">46. Can you explain how character sets work?</A></P>
			<P><A HREF="#codeexamples">47. Can you give me some code examples?</A></P>
		</TD>
		<TD>
			<P>&nbsp;</P>
		</TD>
	</TR>
</TABLE>
<P ALIGN=CENTER><BR><BR>
</P>
<P>&nbsp;</P>
<P><BR><BR>
</P>
<HR>
<P><BR><BR>
</P>
<P><BR><BR>
</P>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="1"></A><FONT SIZE=5>1- How much of JDBC 2.0
is supported by JayBird?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR><BR>
</P>
<P>JayBird complies with the JDBC 2.0 core with some features and
methods not implemented. Some of the unimplemented items are required
by the specification and some are optional.</P>
<P><FONT SIZE=4>Implemented features:</FONT></P>
<P>Most useful JDBC functionality (&quot;useful&quot; in the opinion
of the developers).</P>
<P>Complete JCA API support: may be used directly in JCA-supporting
application servers such as JBoss and WebLogic.</P>
<P>XA transactions with true two phase commit when used as a JCA
resource adapter in a managed environment (with a TransactionManager
and JCA deployment support) as well as when used via
javax.sql.XADataSource implementation.</P>
<P>Includes optional internal connection pooling for standalone use
and use in non-JCA environments such as Tomcat 4.</P>
<P>ObjectFactory implementation for use in environments with JNDI but
no TransactionManager such as Tomcat 4.</P>
<P>DataSource implementations with or without pooling.</P>
<P>Driver implementation for use in legacy applications.</P>
<P>Complete access to all Firebird database parameter block and
transaction parameter block settings.</P>
<P>Optional integrated logging through log4j.</P>
<P>JMX mbean for database management (so far just database create and
drop).</P>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="2"></A><FONT SIZE=5>2- What parts of JDBC
2.0 are NOT supported by JayBird?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR>For more information see the JDBC 2.0 Conformance document in
the source code in the src/etc folder.</P>
<P><FONT SIZE=4>The following optional features are NOT supported:</FONT></P>
<UL>
	<P STYLE="margin-bottom: 0cm">The following optional features and
	the methods that support it are not implemented: 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><B>Updatable cursors.</B> 
	</P>
	<UL>
		<LI><P STYLE="margin-bottom: 0cm">java.sql.ResultSet 
		</P>
		<UL>
			<LI><P STYLE="margin-bottom: 0cm">rowUpdated() 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">rowInserted() 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">rowDeleted() 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">updateXXX(....) 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">insertRow() 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">updateRow() 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">deleteRow() 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">refreshRow() 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">cancelRowUpdates() 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">moveToInsertRow() 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">moveToCurrentRow() 
			</P>
		</UL>
	</UL>
	<LI><P STYLE="margin-bottom: 0cm"><B>Ref, Clob and Array types.</B> 
	</P>
	<UL>
		<LI><P STYLE="margin-bottom: 0cm">java.sql.PreparedStatement 
		</P>
		<UL>
			<LI><P STYLE="margin-bottom: 0cm">setRef(int i, Ref x) 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">setClob (int i, Clob x) 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">setArray(int i, Array x) 
			</P>
		</UL>
		<LI><P STYLE="margin-bottom: 0cm">java.sql.ResultSet 
		</P>
		<UL>
			<LI><P STYLE="margin-bottom: 0cm">getArray(int i) 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">getArray(String columnName) 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">getRef(int i) 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">getRef(String columnName) 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">getClob(int i) 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">getClob(String columnName) 
			</P>
		</UL>
	</UL>
	<LI><P STYLE="margin-bottom: 0cm"><B>User Defined Types/Type Maps.</B>
		</P>
	<UL>
		<LI><P STYLE="margin-bottom: 0cm">java.sql.ResultSet 
		</P>
		<UL>
			<LI><P STYLE="margin-bottom: 0cm">getObject(int i, java.util.Map
			map) 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">getObject(String columnName,
			java.util.Map map) 
			</P>
		</UL>
		<LI><P STYLE="margin-bottom: 0cm">java.sql.Connection 
		</P>
		<UL>
			<LI><P STYLE="margin-bottom: 0cm">getTypeMap() 
			</P>
			<LI><P>setTypeMap(java.util.Map map) 
			</P>
		</UL>
	</UL>
</UL>
<P>Excluding the unsupported features, the following methods are not
yet implemented:</P>
<UL>
	<LI><P STYLE="margin-bottom: 0cm"><B>java.sql.Statement</B> 
	</P>
	<UL>
		<LI><P STYLE="margin-bottom: 0cm">cancel() 
		</P>
	</UL>
	<LI><P STYLE="margin-bottom: 0cm"><B>java.sql.CallableStatement</B> 
	</P>
	<UL>
		<LI><P STYLE="margin-bottom: 0cm">wasNull() 
		</P>
	</UL>
	<LI><P STYLE="margin-bottom: 0cm"><B>java.sql.Blob</B> 
	</P>
	<UL>
		<LI><P STYLE="margin-bottom: 0cm">position(byte pattern[], long
		start) 
		</P>
		<LI><P>position(Blob pattern, long start) 
		</P>
	</UL>
</UL>
<P>The following methods are implemented, but do not work as
expected:</P>
<UL>
	<LI><P STYLE="margin-bottom: 0cm"><B>java.sql.Statement</B> 
	</P>
	<UL>
		<LI><P STYLE="margin-bottom: 0cm">get/setMaxFieldSize does nothing 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">get/setQueryTimeout does nothing 
		</P>
	</UL>
	<LI><P STYLE="margin-bottom: 0cm"><B>java.sql.PreparedStatement</B> 
	</P>
	<UL>
		<LI><P STYLE="margin-bottom: 0cm">setObject(index,object,type) This
		method is implemented but behaves as setObject(index,object) 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">setObject(index,object,type,scale)
		This method is implemented but behaves as setObject(index,object) 
		</P>
	</UL>
	<LI><P STYLE="margin-bottom: 0cm"><B>java.sql.ResultSetMetaData</B> 
	</P>
	<UL>
		<LI><P STYLE="margin-bottom: 0cm">isReadOnly(i) always returns
		false 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">isWritable(i) always returns true
				</P>
		<LI><P STYLE="margin-bottom: 0cm">isDefinitivelyWritable(i) always
		returns true 
		</P>
	</UL>
	<LI><P STYLE="margin-bottom: 0cm"><B>java.sql.DatabaseMetaData</B> 
	</P>
	<UL>
		<LI><P>getBestRowIdentifier(i) always returns empty resultSet 
		</P>
	</UL>
</UL>
<UL>
	<P>&nbsp; 
	</P>
</UL>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="3"></A><FONT SIZE=5>3- Where do I get
JayBird?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR><BR>
</P>
<P>In your browser go to:</P>
<P><A HREF="http://sourceforge.net/projects/firebird/">http://sourceforge.net/projects/firebird/</A></P>
<P>Scroll down the page and find the row containing:</P>
<P>firebird-jca-jdbc-driver</P>
<P>Click the link &quot;Download&quot; in the rightmost column of the
table in that row. This links you to another page with the zip files
of the various versions of JayBird available to be downloaded.
JayBird will have the heading &quot;firebird-jca-jdbc-driver&quot;.
Click on the version you wish to download. It looks something like:
FirebirdSQL-1.x.zip.</P>
<P>This will download the driver files to your system. Unzip the file
and copy the contents to the appropriate directories on your system
as described in <A HREF="#4">#4 &quot;How do I install JayBird?&quot;</A>
below.</P>
<P>More recent bugfix versions of JayBird can be obtained by
downloading the daily snapshot of the project through CVS and
building the project. <A HREF="#13">See #13</A> below for details.</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="4"></A><FONT SIZE=5>4- How do I install
JayBird?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR><BR>
</P>
<P>The classes from firebirdsql.jar must be in the classpath of the
Java application being compiled, or otherwise made available to your
application. The classes from the following packages must also be
available:</P>
<UL>
	<LI><P>mini-concurrent.jar</P>
	<LI><P>jaas.jar (included in jdk 1.4)</P>
	<LI><P>mini-j2ee.jar (now including JDBC classes)</P>
	<LI><P>log4j-core.jar (if you want logging available)</P>
</UL>
<P><BR>The firebirdsql-full.jar file has all of the needed files in
one archive for ease of use.</P>
<P>These archives are included in the binary package.</P>
<P>You can use the jmx management mbean either in a jmx agent
(MBeanServer) or as a standalone class. So far it has been tested in
jbossmx and the jmxri, although since it is extremely simple it
should have no problems in any jmx implementation. Use of jbossmx is
highly recommended due to its smaller bug count and because it is in
active development.</P>
<P>For use in a managed environment as a JCA resource adapter, deploy
firebirdsql.rar according to the environment's deployment mechanism.</P>
<P>For installation in Tomcat, JBoss, JBuilder, and for use with
stand alone Java programs see the corresponding sections below.</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="5"></A><FONT SIZE=5>5- How do I use built-in
Connection Pooling?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR><BR>
</P>
<P>JayBird features built-in connection pooling. This is very useful
because it eliminates the need for external connection pooling
routines like Poolman or DBCP.</P>
<P>Use FBWrappingDataSource for pooling. See <A HREF="#poolingcode">A
simple pooling example</A> below for a code example.</P>
<P>Setting up and shutting down JDBC connections to databases tend to
be very time and CPU intensive operations. Connection pooling allows
connections to be stored and reused by applications, or even by
different applications without going through the time consuming task
of setting up the connection again.</P>
<P>Using a connection pool effectively while preventing data
corruption and unauthorized access requires a slightly different
mindset.</P>
<P>The Firebird database uses the concept of user logins. To access
the database a user must log in and provide a password that the
database recognizes. This is set up by the database administrator.</P>
<P>This can lead to problems with a connection pool. Suppose &quot;joe&quot;
logs in using his password and works with the database. If he logs
out and his connection is kept alive and given to the next user,
&quot;bob&quot;, without re-authorizing, &quot;bob&quot; may be able
to see confidential data that he is not intended to see. Worse he can
change or delete data he should not have access to.</P>
<P>If we only allow users to use connections previously opened with
their username, we drastically reduce the effectiveness of the pool.</P>
<P>To make the pool most effective we have to login with the same
username every time. This requires us to manage the user access to
the database in our code rather that allowing Firebird to do it for
us. This is usually accomplished by creating a table of usernames,
passwords, and roles separate from those maintained by the database.</P>
<P>When a user logs in, all database access is done under a single
username and password known to Firebird, for example username
&quot;calendar&quot;, password &quot;calpass&quot;. The program then
opens a user table created for the application and retrieves the
username, password, and role of the user, which might be &quot;Joe&quot;,
&quot;joespassword&quot;, and &quot;manager&quot;. The retrieved
username and password is compared by your program to those provided
by the user. If they match, your program allows the user to perform
actions on the database allowed for users with their role, all under
the Firebird username of &quot;calendar&quot;.</P>
<P>When the next user, &quot;bob&quot;, logs in, transactions are
still done with your program using the connection opened with the
&quot;calendar&quot; Firebird username with the database, but the
program checks the &quot;bob&quot; password and role in the
application user table before allowing transactions.</P>
<P>This results in maximum efficiency of connection pools. It is also
compatible with the way that web application servers handle container
managed security. So even if your program starts out as a standalone
Java program, you can &quot;webify&quot; the database access part of
it very easily.</P>
<P>It is possible to obtain connections with different
usernames/passwords with pooling enabled, and the connections will be
kept separate, but this is apt to result in inefficient connection
usage.</P>
<P>Be aware that JayBird provides no encryption. If you use JayBird
in a standalone Java program, anyone who can listen to your network
connection can see your usernames, passwords, and data as it crosses
the net. You must take steps to secure your data. You can do this by
all the standard methods: Secure networks, VPN, etc.</P>
<P>A popular way to provide wide access to your database while still
providing security is to write your application as a web application
that is viewed in a browser, rather than as a stand-alone
application. Then you can restrict your web app to running under
secure HTTP.</P>
<P>If you are using JayBird in stand-alone Java applications there is
little need to use anything other than the built-in pooling.</P>
<P>However, in some cases, you may not want to use the built-in
connection pooling. If you are using JayBird with a J2EE server that
manages connection pooling, like JBoss, you should deploy JayBird as
a JCA resource adapter.</P>
<P>In such cases the container (J2EE Server) needs JayBird to be
deployed as a JCA resource adapter so that it can manage connection
usage and pooling, hook the connections up to the transaction
manager, and manage the security and supply connections logged as
appropriate for the current application user.</P>
<P>If you are using a limited J2EE server you may need to use the
built-in pooling. Versions of Tomcat before 4.1 are an example. From
version 4.1, Tomcat has provided connection pooling via DBCP. Tomcat
is a Servlet and Java Server Pages (JSP) server, but does not provide
full J2EE web application server support.</P>
<P>Since a large number of installations use only servlets and JSP's,
application servers like Tomcat, JRun, Cold Fusion, Servlet Exec, and
Resin have become very popular. These have varying support for
connection pooling. You will have to check the features of the
particular version of your app server to see if pooling is offered or
if you will need to use the built-in pool from JayBird.</P>
<P>See the sections below on JBoss, Tomcat, and Using JayBird in Java
code for specific information on those environments.</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="6"></A><FONT SIZE=5>6- How do I use JayBird
in Java code?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P>Two forms of JayBird can be used. FBDriver is used much like the
old Interclient driver. FBWrappingDataSource has internal connection
pooling capability. Examples of both are included here. Code examples
of many of the classes and methods used by JayBird can be found in
the src/test subdirectory of the source code available on
SourceForge.net, see question 13 below.</P>
<P>JayBird supports two URL syntax formats:</P>
<P STYLE="margin-left: 2cm">Standard format=
jdbc:firebirdsql:[//host[:port]/]&lt;database&gt; 
</P>
<P STYLE="margin-left: 2cm">FB old format=
jdbc:firebirdsql:[host[/port]:]&lt;database&gt;</P>
<P><BR><BR>
</P>
<P>For all environments that do not support JCA deployment, make the
classes in firebirdsql.jar available to your application. You will
probably have to use some of the jars mentioned above as necessary.</P>
<P>For use in a somewhat managed environment with JNDI but no JCA
support or transaction manager, use the FBDataSourceObjectFactory to
bind a reference to a DataSource into JNDI. Tomcat 4 is an example of
this scenario. The JNDI implementation must support use of
References/Referenceable. This will not work if the JNDI
implementation only supports binding serialized objects.</P>
<P>For use in a standalone application that only needs one
connection, use either FBWrappingDataSource or FBDriver.</P>
<P>A typical use of the FBDriver class would use code something like
this:</P>
<PRE><CODE CLASS="western">Class.forName(&quot;org.firebirdsql.jdbc.FBDriver&quot;);</CODE>
<CODE CLASS="western">Connection conn = DriverManager.getConnection(&quot;jdbc:firebirdsql:localhost/3050:/firebird/test.gdb&quot;, &quot;sysdba&quot;, &quot;masterkey&quot;);</CODE></PRE><P STYLE="margin-left: 2cm">
<BR><BR>
</P>
<P>Or in windows:</P>
<PRE><CODE CLASS="western">DriverManager.getConnection(&quot;jdbc:firebirdsql:localhost/3050:E:\\database\\carwash.gdb&quot;, &quot;sysdba&quot;, &quot;masterkey&quot;);</CODE></PRE><P>
<BR><BR>
</P>
<P>For use in a standalone application with multiple connections that
would benefit from connection pooling, use an instance of
FBWrappingDataSource configured for pooling.</P>
<P><A NAME="poolingcode"></A><FONT SIZE=4>A simple pooling example:</FONT></P>
<PRE><CODE CLASS="western">boolean FBDriverLoaded=false; </CODE>
<CODE CLASS="western">if (!FBDriverLoaded)</CODE>
<CODE CLASS="western">{ // don't load JayBird more than once.</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">try</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">{</CODE>
<CODE CLASS="western">        </CODE><CODE CLASS="western">org.firebirdsql.jdbc.FBWrappingDataSource fbwds = new org.firebirdsql.jdbc.FBWrappingDataSource();</CODE>
<CODE CLASS="western">        </CODE><CODE CLASS="western">FBDriverLoaded = true;</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">}</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">catch (ResourceException e)</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">{</CODE>
<CODE CLASS="western">        </CODE><CODE CLASS="western">System.out.println(&quot;Could Not create org.firebirdsql.jdbc.FBWrappingDataSource, error:&quot;+e+&quot;\n&quot;);</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">}</CODE>

<CODE CLASS="western">    </CODE><CODE CLASS="western">fbwds.setDatabase(&quot;//localhost:3050/dir1/subdir/myDatabase.gdb&quot;);</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">// an old format version of the same url</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">// fbwds.setDatabase(&quot;localhost/3050:/dir1/subdir/myDatabase.gdb&quot;);</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">fbwds.setUserName(&quot;sysdba&quot;);</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">fbwds.setPassword(&quot;masterkey&quot;);</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">fbwds.setIdleTimeoutMinutes(30);</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">fbwds.setPooling(true); // this turns on pooling for this data source. Max and min must be set.</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">fbwds.setMinSize(5); // this sets the minimum number of connections to keep in the pool</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">fbwds.setMaxSize(30); // this sets the maximum number of connections that can be open at one time.</CODE>

<CODE CLASS="western">    </CODE><CODE CLASS="western">try</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">{</CODE>
<CODE CLASS="western">        </CODE><CODE CLASS="western">fbwds.setLoginTimeout(10);</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">}</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">catch (SQLException e)</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">{</CODE>
<CODE CLASS="western">        </CODE><CODE CLASS="western">System.out.println(&quot;Could not set Login Timeout in SQLDriver\n&quot;);</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">}</CODE>
<CODE CLASS="western">}</CODE>
<CODE CLASS="western">else</CODE>
<CODE CLASS="western">{</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">//System.out.println(&quot;Firebird Driver already exists, not reloaded.\n&quot;);</CODE>
<CODE CLASS="western">}</CODE>

<CODE CLASS="western">Connection c;</CODE>
<CODE CLASS="western">try</CODE>
<CODE CLASS="western">{</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">c = fbwds.getConnection();</CODE>
<CODE CLASS="western">}</CODE>
<CODE CLASS="western">catch (SQLException e)</CODE>
<CODE CLASS="western">{</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">system.out.println(&quot;getting new fbwds connection failed! Error: &quot;+e+&quot;\n&quot;);</CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">handleError(e);</CODE>
<CODE CLASS="western">}</CODE>
<CODE CLASS="western">// Use the connection &quot;c&quot; like any other connection then close it.</CODE>
<CODE CLASS="western">// To release the connection back to the pool you must also close all result sets</CODE>
<CODE CLASS="western">// and close all statements associated with the connection.</CODE>
<CODE CLASS="western">c.close();</CODE>
<CODE CLASS="western">// closing c returns it to the pool.</CODE>
</PRE><P>
Be aware that no security or encryption is built into JayBird. If you
use stand-alone Java programs you must provide secure access to your
database to protect your passwords and data.</P>
<P>More Java code for a driver example and a DataSource example are
included in the <A HREF="#codeexsamples">Code Examples</A> section
below.</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="7"></A><FONT SIZE=5>7- How do I use JayBird
with JBoss?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR><BR>
</P>
<P>Deployment in JBoss 3.0.0 and later:</P>
<P>The additional jars/classes mentioned above are already available
in JBoss. Put firebirdsql.rar in the deploy directory. Get
firebird-service.xml from your binary jboss distribution or jboss CVS
at connector[jbosscx]/src/etc/example-config/firebird-service.xml and
modify the URL to point to the desired database location. If you get
a configuration from CVS, please be very sure and check twice that
you have the correct version for your JBoss version. There are
hard-to-spot incompatibilities between every minor release.</P>
<P>For simplicity, start by setting the UserName and Password in the
firebird-service.xml configuration file. If you need more advanced
JAAS based login, set that up based on the instructions in the jboss
3 manual or the quickstart guide after you have a simple
configuration working.</P>
<P><BR><BR>
</P>
<HR>
<P>&nbsp; 
</P>
<P ALIGN=CENTER><A NAME="8"></A><FONT SIZE=4 STYLE="font-size: 16pt">8-
How do I use JayBird with </FONT><FONT SIZE=4>Tomcat?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=CENTER><BR><BR>
</P>
<P>CATALINA_HOME is the installation directory for Tomcat 4.x or
greater. An environment variable of that name is set up on the Tomcat
server. TOMCAT_HOME was used in versions before Tomcat 4.</P>
<P>To use JayBird with Tomcat you must put the jar files where your
web apps can access them. Once they are available to your web apps
you use JayBird in your servlets or beans just as you would in
standalone programs.</P>
<P>If you have only one webapp using JayBird or you need to keep
JayBird separate from other web apps, put the jar files in the
WEB-INF/lib/ subdirectory of your web app.</P>
<P>It is more likely that Firebird will be used by all of your web
apps and Tomcat itself. To have universal access to JayBird, put the
jars in CATALINA_HOME/common/lib/.</P>
<P>A simple example web app that creates a Firebird database and does
a few transactions directly is included below. It is called test.</P>
<P>Below that is the same web app set up to use a DataSource and
connection pooling via DBCP. It is called dbTest.</P>
<P>To use JayBird's internal connection pooling, you can configure an
FBWrapping DataSource for pooling just as you would in a stand-alone
program. If you put a class for doing that in a servlet and start it
when Tomcat is initialized, you can share a pool among web
applications. If you do this, take care to make it thread safe and
synchronize access to methods.</P>
<P>Tomcat can also use Firebird for BASIC or FORM based user
authentication. See the Tomcat docs for more details. An example
realm for this is listed below. This goes in the
CATALINA_HOME/conf/server.xml file.</P>
<PRE><CODE CLASS="western">&lt;Realm className=&quot;org.apache.catalina.realm.JDBCRealm&quot; debug=&quot;0&quot; </CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">driverName=&quot;org.firebirdsql.jdbc.FBDriver&quot; </CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">userNameCol=&quot;USER_NAME&quot; </CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">connectionName=&quot;sysdba&quot; </CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">userTable=&quot;USERS&quot; </CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">userCredCol=&quot;USER_PASS&quot; </CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">validate=&quot;true&quot; </CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">connectionURL=&quot;jdbc:firebirdsql:localhost/3050:/dir1/subdir/usersdb.gdb&quot; </CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">userRoleTable=&quot;USER_ROLES&quot; </CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">roleNameCol=&quot;ROLE_NAME&quot; </CODE>
<CODE CLASS="western">    </CODE><CODE CLASS="western">connectionPassword=&quot;masterkey&quot;/&gt;</CODE></PRE><P>
<BR><BR>
</P>
<P>If your web app is set up to allow Tomcat to authenticate users
this tells Tomcat to use Firebird to look up user names and
passwords. It does this by calling the Firebird driver FBDriver to
login to a database named usersdb.gdb located on localhost in the
directory /dir/subdir/, using the username sysdba and the password
masterkey.</P>
<P>Tomcat then takes the username that is typed into the browser by
the person logging into the web app and searches the table named
USERS to see if it is in the field USER_NAME of a record. If it is,
it checks to see if the password typed into the browser is the same
as the one in the field USER_PASS for that record. If it is, the user
is allowed to login and Tomcat opens the table USER_ROLES and
searches for all entries with USER_NAME. For each record it finds, it
looks in the ROLE_NAME column and adds that role name to a list of
roles for the user. It then allows access to web apps based on the
roles listed by the database.</P>
<P>You can configure your web apps in WEB-INF/web.xml to only allow
users with certain roles access to the web app. You can even use the
role inside your JSP's to only draw certain parts of an HTML page if
a user has the appropriate role. This allows you to customize each
page based on a user's role.</P>
<P>To use Tomcat's online GUI management web app to control your
Tomcat installation, you must have the role &quot;manager&quot; in
the USER_ROLES table under your name.</P>
<P>See the Tomcat docs for more information.</P>
<P><FONT SIZE=5>Sample Web Apps</FONT></P>
<P>These examples assume that the username SYSDBA and password
masterkey are valid. These samples create and search for the database
in /databases/test.gdb. To use a different directory change those
entries below. For windows change /databases/test.gdb to
c:\\databases\\test.gdb, for example.</P>
<P><FONT SIZE=4>Sample web app test:</FONT></P>
<P>To use this sample web app create a folder called &quot;test&quot;
in the webapps directory of your Tomcat installation. Put the HTML
file below into a file called index.htm inside the folder called
test. Put the contents of the XML file following this into
test/WEB-INF/web.xml. Finally, put the contents of the jsp file
following that into test/search.jsp. Start Tomcat and run test in
your browser by calling http://localhost/test/index.htm.</P>
<P><FONT SIZE=4>Put this in CATALINA_HOME/webapps/test/index.htm:</FONT></P>
<PRE>&lt;html&gt;<BR>&lt; head&gt;<BR>&lt; title&gt;index.htm&lt;/title&gt;<BR>&lt; meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;<BR>&lt; /head&gt;
&lt;body bgcolor=&quot;#CCCCFF&quot; text=&quot;#000000&quot;&gt;<BR>&lt; /p&gt;<BR>&lt; H1 align=&quot;center&quot;&gt;Enter Name&lt;/H1&gt;<BR>&lt; /H1&gt;<BR>&lt; p&gt;This demo of a simple web app will take the name you type above and search<BR>a table called CUSTOMERS in a Firebird database named test.gdb using the JayBird<BR>JDBC<BR>driver.<BR>The table CUSTOMERS has two fields (columns): FIRST_NAME and LAST_NAME.&lt;/p&gt;<BR>&lt; p&gt;If the database or tables don't exist they will be created for you. You will<BR>need to edit the Strings at the top of the file search.jsp to appropriate<BR>ones for your system.&lt;/p&gt;<BR>&lt; p&gt;If there are no entries with the same last name that you type in, the program<BR>will add 3 so you will get some output: &amp;quot;Aaron, Bob, and Calvin&amp;quot;.&lt;/p&gt;<BR>&lt; p&gt;&amp;nbsp;&lt;/p&gt;<BR>&lt; form name=&quot;form1&quot; method=&quot;post&quot; action=&quot;search.jsp&quot;&gt;<BR>&lt; p align=&quot;center&quot;&gt;<BR>Type a Last Name to search for here:<BR>&lt;input name=&quot;name&quot; type=&quot;text&quot; id=&quot;name&quot;&gt;<BR>then click &amp;quot;Submit&amp;quot;.&lt;/p&gt;<BR>&lt; p align=&quot;center&quot;&gt; &lt;input type=&quot;submit&quot; name=&quot;Submit&quot; value=&quot;Submit&quot;&gt;<BR>&lt; /p&gt;<BR>&lt; /form&gt;<BR>&lt; p&gt;&amp;nbsp;&lt;/p&gt;<BR>&lt; /body&gt;<BR>&lt; /html&gt;</PRE><P>
&nbsp;</P>
<P><FONT SIZE=4>Put this in
CATALINA_HOME/webapps/test/WEB-INF/web.xml:</FONT></P>
<PRE>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
<BR>&lt; !DOCTYPE web-app PUBLIC '-//Sun Microsystems, Inc.//DTD Web Application 2.2//EN' 'http://java.sun.com/j2ee/dtds/web-app_2.2.dtd'&gt;
&lt;web-app&gt;<BR>&lt;session-config&gt;<BR>&lt;session-timeout&gt;<BR>30<BR>&lt;/session-timeout&gt;<BR>&lt;/session-config&gt;<BR>&lt;welcome-file-list&gt;<BR>&lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;<BR>&lt;/welcome-file-list&gt;<BR>&lt; /web-app&gt;
</PRE><P>
Put this in CATALINA_HOME/webapps/test/search.jsp:</P>
<PRE>&lt;%@page contentType=&quot;text/html; charset=iso-8859-1&quot; language=&quot;java&quot; import=&quot;java.sql.*,org.firebirdsql.management.*&quot;%&gt;
&lt;html&gt;<BR>&lt; head&gt;<BR>&lt; title&gt;search.jsp&lt;/title&gt;<BR>&lt; meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;<BR>&lt; /head&gt;
&lt;body bgcolor=&quot;#CCCCFF&quot; text=&quot;#000000&quot;&gt;&lt;p&gt;<BR>&lt; /p&gt;<BR>&lt; H1 align=&quot;center&quot;&gt;Test Search&lt;/H1&gt;
&lt;%<BR>// Edit the strings below as needed for your system.
String DB_SERVER_URL = &quot;localhost&quot;;<BR>int DB_SERVER_PORT = 3050;
// Use forward slashes here, even on Windows systems.<BR>String DB_PATH = &quot;c:/databases&quot;;
String DB_NAME = &quot;test.gdb&quot;;<BR>String DB_USER = &quot;sysdba&quot;;<BR>String DB_PASSWORD = &quot;masterkey&quot;;<BR>String DB_CONNECTION_STRING = &quot;jdbc:firebirdsql:&quot;+DB_SERVER_URL+&quot;/&quot;+DB_SERVER_PORT+&quot;:&quot;+DB_PATH+&quot;/&quot;+DB_NAME;
String lastName = request.getParameter(&quot;name&quot;);
// To help you debug, you can set a session attribute to values indicating<BR>// the prograss through the web app, then use an HTTP monitor to see how far <BR>// you have progressed.
// This stuff creates the database with the JMX management tools <BR>// if it doesn't already exist.<BR>FBManager fbManager = new FBManager();
fbManager.setServer(DB_SERVER_URL);<BR>fbManager.setPort(DB_SERVER_PORT);
fbManager.start();
fbManager.createDatabase(DB_PATH + &quot;/&quot; + DB_NAME, DB_USER, DB_PASSWORD);
<BR>// Load the JayBird driver. This is OK for a test but your real web apps<BR>// should use a dataSource for efficiency and flexibility.<BR>Class.forName(&quot;org.firebirdsql.jdbc.FBDriver&quot;);
%&gt;<BR>Opening a connection with connection string: &lt;%=DB_CONNECTION_STRING%&gt;&lt;BR&gt;&lt;BR&gt;<BR>&lt; %
// Get a connection to the database.<BR>Connection connRSFind = DriverManager.getConnection(DB_CONNECTION_STRING, DB_USER, DB_PASSWORD);
// Back to HTML, show the user the LAST_NAME typed in.<BR>%&gt;<BR>&lt; p&gt;<BR>The user entered name is: &lt;%=lastName%&gt;<BR>&lt; p&gt;<BR>&lt; %
String sqlString = &quot;SELECT * FROM CUSTOMERS WHERE LAST_NAME = \'&quot; + lastName +&quot;\'&quot;;
// Switch back to html so we can print out the sqlString on the web page.<BR>%&gt;
The SQL String is: &lt;%=sqlString%&gt;&lt;p&gt;
&lt;%<BR>PreparedStatement StatementRSFind=null;<BR>ResultSet RSFind=null;<BR>boolean resultException=false;<BR>boolean rsReady = false;
try<BR>{<BR>StatementRSFind = connRSFind.prepareStatement(sqlString);
RSFind = StatementRSFind.executeQuery();<BR>rsReady = RSFind.next();<BR>}<BR>catch(SQLException e1)<BR>{<BR>resultException = true; // Set a flag so that we know there was an error, not just an empty result set.
%&gt;<BR>Could not find table, I'll try to add it: &lt;%=e1.getMessage()%&gt;&lt;BR&gt;<BR>&lt; %<BR>}
if (!rsReady || resultException)<BR>{ // If there are no database entries with this last name, enter a few so the user has something to look at.<BR>// Or, if there was an error, the table probably doesn't exist yet.
// try to create table CUSTOMERS, in case it doesn't exist yet.
if (resultException)<BR>{// The table CUSTOMERS probably doesn't exist, so we create it here.<BR>Statement statement2=null;
try<BR>{<BR>statement2 = connRSFind.createStatement();<BR>}<BR>catch(SQLException e2)<BR>{<BR>%&gt;<BR>Could not create statement2 with this connection! Check your database settings in search.jsp: &lt;%=e2.getMessage()%&gt;&lt;BR&gt;<BR>&lt; %<BR>}
if (statement2 != null)<BR>{<BR>try<BR>{ // try to crate the table CUSTOMERS.<BR>sqlString = &quot;CREATE TABLE CUSTOMERS(LAST_NAME VARCHAR(50), FIRST_NAME VARCHAR(50))&quot;;<BR>statement2.execute(sqlString);<BR>statement2.close();<BR>}<BR>catch(SQLException e2a)<BR>{<BR>%&gt;<BR>Table CUSTOMERS already exists and we tried to create it again, or it could not be created: &lt;%=e2a.getMessage()%&gt; &lt;BR&gt;<BR>&lt; %<BR>}<BR>}<BR>} // Table CUSTOZMERS should exist now, if it didn't before or things are really messed up.<BR>else<BR>{<BR>%&gt;<BR>First attempt at getting a result set produced an empty result set.&lt;BR&gt;<BR>&lt; %<BR>}
// Insert some names into table CUSTOMERS. Either the table is new and empty, or there were<BR>// no entries with the last name the user gave us, so we'll enter a few, so the user has<BR>// something to look at.<BR>Statement statement3=null;
try<BR>{<BR>statement3 = connRSFind.createStatement();<BR>}<BR>catch(SQLException e3)<BR>{<BR>%&gt;<BR>Could not create statement3 with this connection! Check your database settings in search.jsp: &lt;%=e3.getMessage()%&gt;&lt;BR&gt;<BR>&lt; %<BR>}
if (statement3 != null)<BR>{<BR>try<BR>{<BR>sqlString = &quot;INSERT INTO CUSTOMERS(LAST_NAME, FIRST_NAME) VALUES(\'&quot;+lastName+&quot;\', 'Aaron')&quot;;<BR>%&gt;<BR>Executing SQL: &lt;%=sqlString%&gt;&lt;BR&gt;<BR>&lt; %<BR>statement3.execute(sqlString);<BR>sqlString = &quot;INSERT INTO CUSTOMERS(LAST_NAME, FIRST_NAME) VALUES(\'&quot;+lastName+&quot;\', 'Bob')&quot;;<BR>%&gt;<BR>Executing SQL: &lt;%=sqlString%&gt;&lt;BR&gt;<BR>&lt; %<BR>statement3.execute(sqlString);<BR>sqlString = &quot;INSERT INTO CUSTOMERS(LAST_NAME, FIRST_NAME) VALUES(\'&quot;+lastName+&quot;\', 'Calvin')&quot;;<BR>%&gt;<BR>Executing SQL: &lt;%=sqlString%&gt;&lt;BR&gt;&lt;BR&gt;<BR>&lt; %<BR>statement3.execute(sqlString);<BR>statement3.close();<BR>}<BR>catch(SQLException e3a)<BR>{<BR>%&gt;<BR>We could not enter data in table CUSTOMERS for some reason: &lt;%=e3a.getMessage()%&gt; &lt;BR&gt;<BR>&lt; %<BR>}<BR>}
// try again to get a result set.<BR>sqlString = &quot;SELECT * FROM CUSTOMERS WHERE LAST_NAME = \'&quot; + lastName +&quot;\'&quot;; <BR>StatementRSFind = connRSFind.prepareStatement(sqlString);<BR>RSFind = StatementRSFind.executeQuery();<BR>rsReady = RSFind.next();<BR>}
int i = 0;
if (rsReady)<BR>{<BR>boolean done=false;<BR>while (!done)<BR>{<BR>i++;<BR>String RSFind_Last = (String) RSFind.getObject(&quot;LAST_NAME&quot;);<BR>String RSFind_First = (String) RSFind.getObject(&quot;FIRST_NAME&quot;);<BR>// display the names in the browser.<BR>%&gt;<BR>Name &lt;%=i%&gt;: &lt;%=RSFind_First%&gt; &lt;%=RSFind_Last%&gt; &lt;BR&gt;<BR>&lt; %<BR>done = !RSFind.next();<BR>} //End while loop
RSFind.close();<BR>}<BR>else<BR>{<BR>%&gt;<BR>&lt; BR&gt;The result set was empty. Check to be sure database is running and settings in search.jsp are correct.&lt;BR&gt;<BR>&lt; %
}<BR>if (StatementRSFind != null)<BR>StatementRSFind.close();
if (connRSFind != null)<BR>connRSFind.close();
%&gt;
&lt;/body&gt;<BR>&lt; /html&gt;</PRE><P>
Sample web app dbTest:</P>
<P>This sample web app shows how to use a Fiorebird DataSource with
Tomcat. To use it, create a folder called &quot;dbTest&quot; in the
webapps directory of your Tomcat installation. Put the HTML file
below into a file called index.htm inside the folder called dbTest.
Put the contents of the XML file following this into
dbTtest/WEB-INF/web.xml. Put the contents of the jsp file following
that into dbTest/search.jsp. Put the context XML code after that into
the conf/server.xml file of your Tomcat installation just before the
entry: &lt;/Host&gt;. Start Tomcat and run dbTest in your browser by
calling http://localhost/dbTest/index.htm.</P>
<P><FONT SIZE=4>Put this in CATALINA_HOME/webapps/dbTest/index.htm:</FONT></P>
<PRE>&lt;html&gt;<BR>&lt; head&gt;<BR>&lt; title&gt;index.htm&lt;/title&gt;<BR>&lt; meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;<BR>&lt; /head&gt;
&lt;body bgcolor=&quot;#CCCCFF&quot; text=&quot;#000000&quot;&gt;<BR>&lt; /p&gt;<BR>&lt; H1 align=&quot;center&quot;&gt;Enter Name&lt;/H1&gt;<BR>&lt; /H1&gt;<BR>&lt; p&gt;This demo of a simple web app will take the name you type above and search<BR>a table called CUSTOMERS in a Firebird database named test.gdb using the JayBird<BR>JDBC<BR>driver.<BR>The table CUSTOMERS has two fields (columns): FIRST_NAME and LAST_NAME.&lt;/p&gt;<BR>&lt; p&gt;If the database or tables don't exist they will be created for you. You will<BR>need to edit the Strings at the top of the file search.jsp to appropriate<BR>ones for your system.&lt;/p&gt;<BR>&lt; p&gt;If there are no entries with the same last name that you type in, the program<BR>will add 3 so you will get some output: &amp;quot;Aaron, Bob, and Calvin&amp;quot;.&lt;/p&gt;<BR>&lt; p&gt;&amp;nbsp;&lt;/p&gt;<BR>&lt; form name=&quot;form1&quot; method=&quot;post&quot; action=&quot;search.jsp&quot;&gt;<BR>&lt; p align=&quot;center&quot;&gt;<BR>Type a Last Name to search for here:<BR>&lt;input name=&quot;name&quot; type=&quot;text&quot; id=&quot;name&quot;&gt;<BR>then click &amp;quot;Submit&amp;quot;.&lt;/p&gt;<BR>&lt; p align=&quot;center&quot;&gt; &lt;input type=&quot;submit&quot; name=&quot;Submit&quot; value=&quot;Submit&quot;&gt;<BR>&lt; /p&gt;<BR>&lt; /form&gt;<BR>&lt; p&gt;&amp;nbsp;&lt;/p&gt;<BR>&lt; /body&gt;<BR>&lt; /html&gt;</PRE><P>
&nbsp;</P>
<P><FONT SIZE=4>Put this in
CATALINA_HOME/webapps/dbTest/WEB-INF/web.xml:</FONT></P>
<PRE>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE web-app PUBLIC '-//Sun Microsystems, Inc.//DTD Web Application 2.2//EN' 'http://java.sun.com/j2ee/dtds/web-app_2.2.dtd'&gt;
&lt;web-app&gt;<BR>&lt;session-config&gt;<BR>&lt;session-timeout&gt;<BR>30<BR>&lt;/session-timeout&gt;<BR>&lt;/session-config&gt;<BR>&lt;welcome-file-list&gt;<BR>&lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;<BR>&lt;/welcome-file-list&gt;<BR>&lt;resource-ref&gt;<BR>&lt;description&gt;Test SQL DB Connection&lt;/description&gt;<BR>&lt;res-ref-name&gt;jdbc/dbTest&lt;/res-ref-name&gt;<BR>&lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;<BR>&lt;res-auth&gt;Container&lt;/res-auth&gt;<BR>&lt;/resource-ref&gt;<BR>&lt; /web-app&gt;</PRE><P>
Put this in CATALINA_HOME/webapps/dbTest/search.jsp:</P>
<PRE>&lt;%@page contentType=&quot;text/html; charset=iso-8859-1&quot; language=&quot;java&quot; import=&quot;java.sql.*,javax.sql.*,javax.servlet.*, javax.servlet.http.*,javax.naming.*,org.firebirdsql.management.*&quot;%&gt;
&lt;html&gt;<BR>&lt; head&gt;<BR>&lt; title&gt;search.jsp&lt;/title&gt;<BR>&lt; meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;<BR>&lt; /head&gt;
&lt;body bgcolor=&quot;#CCCCFF&quot; text=&quot;#000000&quot;&gt;&lt;p&gt;<BR>&lt; /p&gt;<BR>&lt; H1 align=&quot;center&quot;&gt;Test Search&lt;/H1&gt;
&lt;%<BR>// Edit the strings below as needed for your system.
String DB_SERVER_URL = &quot;localhost&quot;;<BR>int DB_SERVER_PORT = 3050;
// Use forward slashes here, even on Windows systems.<BR>String DB_PATH = &quot;c:/databases&quot;;
String DB_NAME = &quot;test.gdb&quot;;<BR>String DB_USER = &quot;sysdba&quot;;<BR>String DB_PASSWORD = &quot;masterkey&quot;;<BR>String DB_CONNECTION_STRING = &quot;jdbc:firebirdsql:&quot;+DB_SERVER_URL+&quot;/&quot;+DB_SERVER_PORT+&quot;:&quot;+DB_PATH+&quot;/&quot;+DB_NAME;
String lastName = request.getParameter(&quot;name&quot;);
// To help you debug, you can set a session attribute to values indicating<BR>// the prograss through the web app, then use an HTTP monitor to see how far <BR>// you have progressed.
// This stuff creates the database with the JMX management tools <BR>// if it doesn't already exist.<BR>FBManager fbManager = new FBManager();
fbManager.setServer(DB_SERVER_URL);<BR>fbManager.setPort(DB_SERVER_PORT);
fbManager.start();
fbManager.createDatabase(DB_PATH + &quot;/&quot; + DB_NAME, DB_USER, DB_PASSWORD);
%&gt;<BR>Opening a connection with connection string: &lt;%=DB_CONNECTION_STRING%&gt;&lt;BR&gt;&lt;BR&gt;<BR>&lt; %
// Get a connection to the database from the dataSource.<BR>DataSource ds=null;<BR>Connection connRSFind=null;
try<BR>{<BR>Context ctx = new InitialContext();
if(ctx == null ) <BR>throw new Exception(&quot;Boom - No Context&quot;);
ds = (DataSource)ctx.lookup(&quot;java:comp/env/jdbc/dbTest&quot;);
try<BR>{<BR>connRSFind = ds.getConnection();<BR>}<BR>catch (SQLException e)<BR>{<BR>System.out.println(&quot;getting new data source connection failed! Error: &quot;+e+&quot;\n&quot;);<BR>}
}<BR>catch (Exception e)<BR>{<BR>System.out.println(&quot;Could Not get data source, error: &quot;+e+&quot;\n&quot;);<BR>}
// Back to HTML, show the user the LAST_NAME typed in.<BR>%&gt;<BR>&lt; p&gt;<BR>The user entered name is: &lt;%=lastName%&gt;<BR>&lt; p&gt;<BR>&lt; %
String sqlString = &quot;SELECT * FROM CUSTOMERS WHERE LAST_NAME = \'&quot; + lastName +&quot;\'&quot;;
// Switch back to html so we can print out the sqlString on the web page.<BR>%&gt;
The SQL String is: &lt;%=sqlString%&gt;&lt;p&gt;
&lt;%<BR>PreparedStatement StatementRSFind=null;<BR>ResultSet RSFind=null;<BR>boolean resultException=false;<BR>boolean rsReady = false;
try<BR>{<BR>StatementRSFind = connRSFind.prepareStatement(sqlString);
RSFind = StatementRSFind.executeQuery();<BR>rsReady = RSFind.next();<BR>}<BR>catch(SQLException e1)<BR>{<BR>e1.printStackTrace(System.out);<BR>resultException = true; // Set a flag so that we know there was an error, not just an empty result set.
%&gt;<BR>Could not find table, I'll try to add it: &lt;%=e1.getMessage()%&gt;&lt;BR&gt;<BR>&lt; %<BR>}
if (!rsReady || resultException)<BR>{ // If there are no database entries with this last name, enter a few so the user has something to look at.<BR>// Or, if there was an error, the table probably doesn't exist yet.
// try to create table CUSTOMERS, in case it doesn't exist yet.
if (resultException)<BR>{// The table CUSTOMERS probably doesn't exist, so we create it here.<BR>Statement statement2=null;
try<BR>{<BR>statement2 = connRSFind.createStatement();<BR>}<BR>catch(SQLException e2)<BR>{<BR>%&gt;<BR>Could not create statement2 with this connection! Check your database settings in search.jsp: &lt;%=e2.getMessage()%&gt;&lt;BR&gt;<BR>&lt; %<BR>}
if (statement2 != null)<BR>{<BR>try<BR>{ // try to crate the table CUSTOMERS.<BR>sqlString = &quot;CREATE TABLE CUSTOMERS(LAST_NAME VARCHAR(50), FIRST_NAME VARCHAR(50))&quot;;<BR>statement2.execute(sqlString);<BR>statement2.close();<BR>}<BR>catch(SQLException e2a)<BR>{<BR>%&gt;<BR>Table CUSTOMERS already exists and we tried to create it again, or it could not be created: &lt;%=e2a.getMessage()%&gt; &lt;BR&gt;<BR>&lt; %<BR>}<BR>}<BR>} // Table CUSTOZMERS should exist now, if it didn't before or things are really messed up.<BR>else<BR>{<BR>%&gt;<BR>First attempt at getting a result set produced an empty result set.&lt;BR&gt;<BR>&lt; %<BR>}
// Insert some names into table CUSTOMERS. Either the table is new and empty, or there were<BR>// no entries with the last name the user gave us, so we'll enter a few, so the user has<BR>// something to look at.<BR>Statement statement3=null;
try<BR>{<BR>statement3 = connRSFind.createStatement();<BR>}<BR>catch(SQLException e3)<BR>{<BR>%&gt;<BR>Could not create statement3 with this connection! Check your database settings in search.jsp: &lt;%=e3.getMessage()%&gt;&lt;BR&gt;<BR>&lt; %<BR>}
if (statement3 != null)<BR>{<BR>try<BR>{<BR>sqlString = &quot;INSERT INTO CUSTOMERS(LAST_NAME, FIRST_NAME) VALUES(\'&quot;+lastName+&quot;\', 'Aaron')&quot;;<BR>%&gt;<BR>Executing SQL: &lt;%=sqlString%&gt;&lt;BR&gt;<BR>&lt; %<BR>statement3.execute(sqlString);<BR>sqlString = &quot;INSERT INTO CUSTOMERS(LAST_NAME, FIRST_NAME) VALUES(\'&quot;+lastName+&quot;\', 'Bob')&quot;;<BR>%&gt;<BR>Executing SQL: &lt;%=sqlString%&gt;&lt;BR&gt;<BR>&lt; %<BR>statement3.execute(sqlString);<BR>sqlString = &quot;INSERT INTO CUSTOMERS(LAST_NAME, FIRST_NAME) VALUES(\'&quot;+lastName+&quot;\', 'Calvin')&quot;;<BR>%&gt;<BR>Executing SQL: &lt;%=sqlString%&gt;&lt;BR&gt;&lt;BR&gt;<BR>&lt; %<BR>statement3.execute(sqlString);<BR>statement3.close();<BR>}<BR>catch(SQLException e3a)<BR>{<BR>%&gt;<BR>We could not enter data in table CUSTOMERS for some reason: &lt;%=e3a.getMessage()%&gt; &lt;BR&gt;<BR>&lt; %<BR>}<BR>}
// try again to get a result set.<BR>sqlString = &quot;SELECT * FROM CUSTOMERS WHERE LAST_NAME = \'&quot; + lastName +&quot;\'&quot;; <BR>StatementRSFind = connRSFind.prepareStatement(sqlString);<BR>RSFind = StatementRSFind.executeQuery();<BR>rsReady = RSFind.next();<BR>}
int i = 0;
if (rsReady)<BR>{<BR>boolean done=false;<BR>while (!done)<BR>{<BR>i++;<BR>String RSFind_Last = (String) RSFind.getObject(&quot;LAST_NAME&quot;);<BR>String RSFind_First = (String) RSFind.getObject(&quot;FIRST_NAME&quot;);<BR>// display the names in the browser.<BR>%&gt;<BR>Name &lt;%=i%&gt;: &lt;%=RSFind_First%&gt; &lt;%=RSFind_Last%&gt; &lt;BR&gt;<BR>&lt; %<BR>done = !RSFind.next();<BR>} //End while loop
RSFind.close();<BR>}<BR>else<BR>{<BR>%&gt;<BR>&lt; BR&gt;The result set was empty. Check to be sure database is running and settings in search.jsp are correct.&lt;BR&gt;<BR>&lt; %
}<BR>if (StatementRSFind != null)<BR>StatementRSFind.close();
if (connRSFind != null)<BR>connRSFind.close();
%&gt;
&lt;/body&gt;<BR>&lt; /html&gt;</PRE><P>
<BR><BR>
</P>
<P><FONT SIZE=4>Put this in CATALINA_HOME/conf/server.xml before
&lt;/Host&gt;:</FONT> 
</P>
<PRE>&lt;Context path=&quot;/dbTest&quot; docBase=&quot;dbTest&quot;<BR>debug=&quot;0&quot; reloadable=&quot;true&quot; crossContext=&quot;true&quot;&gt;
&lt;Logger className=&quot;org.apache.catalina.logger.FileLogger&quot;<BR>prefix=&quot;localhost_dbTest_log.&quot; suffix=&quot;.txt&quot;<BR>timestamp=&quot;true&quot;/&gt;
&lt;Resource name=&quot;jdbc/dbTest&quot;<BR>auth=&quot;Container&quot;<BR>type=&quot;javax.sql.DataSource&quot;/&gt;
&lt;ResourceParams name=&quot;jdbc/dbTest&quot;&gt;
&lt;parameter&gt;<BR>&lt;name&gt;factory&lt;/name&gt;<BR>&lt;value&gt;org.apache.commons.dbcp.BasicDataSourceFactory&lt;/value&gt;<BR>&lt;/parameter&gt;
&lt;parameter&gt;<BR>&lt;name&gt;removeAbandoned&lt;/name&gt;<BR>&lt;value&gt;true&lt;/value&gt;<BR>&lt;/parameter&gt;
&lt;parameter&gt;<BR>&lt;name&gt;removeAbandonedTimeout&lt;/name&gt;<BR>&lt;value&gt;300&lt;/value&gt;<BR>&lt;/parameter&gt;
&lt;parameter&gt;<BR>&lt;name&gt;logAbandoned&lt;/name&gt;<BR>&lt;value&gt;true&lt;/value&gt;<BR>&lt;/parameter&gt;
&lt;!-- Maximum number of dB connections in pool. Make sure you<BR>configure your Firebird max_connections large enough to handle<BR>all of your db connections. Set to 0 for no limit.<BR>--&gt;<BR>&lt;parameter&gt;<BR>&lt;name&gt;maxActive&lt;/name&gt;<BR>&lt;value&gt;100&lt;/value&gt;<BR>&lt;/parameter&gt;
&lt;!-- Maximum number of idle dB connections to retain in pool.<BR>Set to 0 for no limit.<BR>--&gt;<BR>&lt;parameter&gt;<BR>&lt;name&gt;maxIdle&lt;/name&gt;<BR>&lt;value&gt;30&lt;/value&gt;<BR>&lt;/parameter&gt;
&lt;!-- Maximum time to wait for a dB connection to become available<BR>in ms, in this example 10 seconds. An Exception is thrown if<BR>this timeout is exceeded. Set to -1 to wait indefinitely.<BR>--&gt;<BR>&lt;parameter&gt;<BR>&lt;name&gt;maxWait&lt;/name&gt;<BR>&lt;value&gt;10000&lt;/value&gt;<BR>&lt;/parameter&gt;
&lt;!-- Firebird dB username and password for dB connections --&gt;<BR>&lt;parameter&gt;<BR>&lt;name&gt;username&lt;/name&gt;<BR>&lt;value&gt;SYSDBA&lt;/value&gt;<BR>&lt;/parameter&gt;<BR>&lt;parameter&gt;<BR>&lt;name&gt;password&lt;/name&gt;<BR>&lt;value&gt;masterkey&lt;/value&gt;<BR>&lt;/parameter&gt;
&lt;!-- Class name for JayBird JDBC driver --&gt;<BR>&lt;parameter&gt;<BR>&lt;name&gt;driverClassName&lt;/name&gt;<BR>&lt;value&gt;org.firebirdsql.jdbc.FBDriver&lt;/value&gt;<BR>&lt;/parameter&gt;
&lt;!-- The JDBC connection url for connecting to your MySQL dB.<BR>The autoReconnect=true argument to the url makes sure that the<BR>mm.mysql JDBC Driver will automatically reconnect if mysqld closed the<BR>connection. mysqld by default closes idle connections after 8 hours.<BR>--&gt;<BR>&lt;parameter&gt;<BR>&lt;name&gt;url&lt;/name&gt;<BR>&lt;value&gt;jdbc:firebirdsql:localhost/3050:/databases/test.gdb&lt;/value&gt;<BR>&lt;/parameter&gt;<BR>&lt;/ResourceParams&gt;
&lt;/Context&gt;</PRE><P>
<BR><BR>
</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="9"></A><FONT SIZE=5>9. How do I use JayBird
with JBuilder?</FONT></P>
<P ALIGN=CENTER>Last updated: 2003.11.04</P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR><BR>
</P>
<P>Thanks to Marcelo Lopez Ruiz for the Jbuilder 6 Personal section.</P>
<P>Thanks to John B. Moore for the JBuilder 7 Enterprise notes.</P>
<P>Thanks to Sergio Samayoa for the JBuilder 9 notes.</P>
<P><STRONG>JBuilder 9 Notes:</STRONG></P>
<P>JBuilder 9 installation is similar to JBuilder 7.</P>
<P>1. Unpack JayBird onto your disk.</P>
<P>2. Create a Library for JayBird:</P>
<BLOCKQUOTE>Open JBuilder and pull down the &quot;Tools&quot; menu
from the main menu bar. Select &quot;Configure Libraries&quot;, this
opens a dialog box.</BLOCKQUOTE>
<BLOCKQUOTE>Click the &quot;New&quot; button.This opens the &quot;New
Library Wizard&quot; dialog box.</BLOCKQUOTE>
<BLOCKQUOTE>Type &quot;JayBird&quot; in the &quot;Name&quot; box.</BLOCKQUOTE>
<BLOCKQUOTE>In &quot;Location&quot; select JBuilder.</BLOCKQUOTE>
<BLOCKQUOTE>Click the &quot;Add&quot; button near the &quot;Library
Paths&quot; list.</BLOCKQUOTE>
<BLOCKQUOTE>Type in the path to the firebirdsql-full.jar file and
click the &quot;OK&quot; button.</BLOCKQUOTE>
<BLOCKQUOTE>Close the &quot;New Library Wizard&quot; dialog by
clicking &quot;OK&quot;.</BLOCKQUOTE>
<P>3. Create a file &quot;JayBird.config&quot; in &lt;JBuilder
dir&gt;\lib\ext containing the line (for example):</P>
<BLOCKQUOTE>addpath c:/JayBird/firebirdsql-full.jar</BLOCKQUOTE>
<P>4. Restart JBuilder.</P>
<P>You can now use DataExpress. Add the &quot;JayBird&quot; library
to your project. Note that the driver will not be listed in the
driver selection combo boxes.</P>
<P>&nbsp;</P>
<P><STRONG>JBuilder 7 Enterprise Notes:</STRONG></P>
<P>Create a file...</P>
<P>&lt;JBuilderDir&gt;\Lib\Ext\jaybird.config</P>
<P>Containing the following line...</P>
<P>addpath /JavaJars/jars/firebirdsql.jar</P>
<P>Added Libraries<BR>Make two libraries..<BR>FireBird_JCA_JDBC -
firebirdsql.jar<BR>FireBird_ext - mini-j2ee.jar</P>
<P>Note: the mini-j2ee is needed IF you get a ClassDefNotFound
on<BR>javax/resources/ResourceException. This was encountered using
Tomcat<BR>3.3.. 
</P>
<P><BR><FONT SIZE=4>JBuilder 6 Personal</FONT></P>
<P>If you have any comments/suggestions, drop me an mail at
marcelo.lopezruiz@xlnet.com.ar. If you have some spare time, check
out the rest of the site at
<A HREF="http://www.xlprueba.com.ar/marce/index.htm">http://www.xlprueba.com.ar/marce/index.htm</A>.
</P>
<P><BR><BR>
</P>
<P>1. First, download the .zip file from SourceForge and unzip it to
a temporary directory.</P>
<P>2. Read the release_notes.html document.</P>
<P>3. Unless you are doing funny things with your JDK, you use the
default JDK installed with JBuilder6. In this case, you will need to
download the javax.sql.* package, named the JDBC 2.0 Optional Package
API (formerly known as the JDBC 2.0 Standard Extension API) from Sun,
at <A HREF="http://java.sun.com/products/jdbc/download.html">http://java.sun.com/products/jdbc/download.html</A>.
Select the last option (option package binary), accept the license
agreement, and download the .jar file. 
</P>
<P>4. Start JBuilder 6 Personal. 
</P>
<P>5. Create a new project (File | New Project...). Select a
directory and a project name, then click Next. In step 2, select the
Required Libraries tab - here, the required libraries will be
registered with JBuilder and then added to the project.</P>
<P>6. Click the Add button. A list of libraries JBuilder is aware of
will be shown. Click the New button to register the required
libraries. Enter FireBird JCA-JDBC in the Name field, select JBuilder
in the Location combo box, and click the Add button. Select the
firebirdsql.jar you unzipped, and click OK. Click OK again to close
the library. Verify that the new library is selected, and click OK to
close the &quot;Select One or More Libraries&quot; dialog box.</P>
<P>7. Repeat the previous steps with the following libraries, found
in the lib subdirectory of the binary distribution (except for the
last package, which you downloaded from Sun). 
</P>
<P>concurrent.jar, named Concurrency Utilities 
</P>
<P>connector.jar, named Connector 
</P>
<P>jta-spec1_0_1.jar, named Java Transaction API 
</P>
<P>jdbc2_0-stdext.jar, named JDBC 2 Optional Package 
</P>
<P><BR><BR>
</P>
<P>8. Click Next, enter the desired project information, and click
Finish. 
</P>
<P>9. Create a new application (File | New, then Application in the
New tab). Enter the information you want for your application, and
complete the wizard. 
</P>
<P>10. Click on the Design tab, and double-click on the button with
the opening folder icon to create an event handler. 
</P>
<P>11. Type the following code for the event handler (note the small
helper method above). 
</P>
<PRE>private void feedback(String text) {
    statusBar.setText(text);
}
void jButton1_actionPerformed(ActionEvent e) {
    // Hard-coded parameters
    String pathToDatabase = &quot;C:\\Program Files\\Firebird\\examples\\EMPLOYEE.GDB&quot;;
    String userName = &quot;sysdba&quot;;
    String password = &quot;masterkey&quot;;
    String sql = &quot;SELECT * FROM EMPLOYEE&quot;;

    // Load the FireBird driver.
    try {
        Class.forName(&quot;org.firebirdsql.jdbc.FBDriver&quot;);
    } catch(ClassNotFoundException cnfe) {
        feedback(&quot;org.firebirdsql.jdbc.FBDriver not found&quot;);
        return;
    }

    // Retrieve a connection.
    try {
        Statement stmt = null;
        ResultSet rst = null;
        Connection conn = DriverManager.getConnection(
            &quot;jdbc:firebirdsql:localhost/3050:&quot; + pathToDatabase, userName, password);
        try {
            // Create a statement and retrieve its result set.
            stmt = conn.createStatement();
            rst = stmt.executeQuery(SQL);
            // Show the result set through the standard output.
            int columnCount = rst.getMetaData().getColumnCount();
            int recordIndex = 0;
            while(rst.next()) {
                recordIndex++;
                System.out.println(&quot;Record: &quot; + recordIndex);
                for (int i=1;i&lt;=columnCount;i++) {
                    System.out.print(rst.getMetaData().getColumnName(i));
                    System.out.print(&quot;: &quot;);
                    System.out.println(rst.getString(i));
                }
            }
        } finally {
            // close the database resources immediately, rather than waiting
            // for the finalizer to kick in later
            if (rst != null) rst.close();
            if (stmt != null) stmt.close();
            conn.close();
        }
    } catch(SQLException se) {
        feedback(se.toString());
        se.printStackTrace();
    }
}</PRE><P>
<BR><BR>
</P>
<P>12. Type the following code at the beginning of the file, after
the import statements. 
</P>
<P>import java.sql.*;</P>
<P>13. Run the application, click the button, and view the output. 
</P>
<P>14. For the morbidly curious, the following link provides an
overview of the classes offered by the concurrent.jar package.</P>
<P><A HREF="http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/intro.html">http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/intro.html</A>
</P>
<P>15. When using this library, note that there are still
unimplemented things. To view the source for the Connection class and
check which methods will return null values or an unimplemented
exception, see the following URL.
<A HREF="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/firebird/client-java/src/org/firebirdsql/jdbc/FBConnection.java?rev=HEAD&amp;content-type=text/vnd.viewcvs-markup">http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/firebird/client-java/src/org/firebirdsql/jdbc/FBConnection.java?rev=HEAD&amp;content-type=text/vnd.viewcvs-markup</A>
</P>
<P><BR><BR>
</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="10"></A><FONT SIZE=5>10- How do I use Blobs
with JayBird?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR><BR>
</P>
<P>Blobs are Binary Large OBjects. Blobs are used to store blocks of
binary data of varying size in the database. An example would be a
database table to store gif or jpeg images for a photo album program.
Such a program could be written using the database to store file
names of image files to be loaded from disk, but this could easily be
corrupted if a file name were changed, a file inadvertently deleted,
or the database moved to a system with different file naming
conventions.</P>
<P>Blobs allow the binary image data to be stored, retrieved, backed
up, and migrated like any other database data.</P>
<P>The Interclient JDBC driver did not implement many of the blob
handling methods in the JDBC interfaces. So, the programmer had
limited tools for using blobs with Interclient. That is no longer the
case with JayBird. If you come across old code or help files dealing
with blobs and Interbase/Interclient, be aware that it may be
outdated and easier ways of dealing with blobs are available with
JayBird.</P>
<P>Firebird BLOB fields are accessed through different JDBC
interfaces depending on their subtype. For subtype &lt;0, they are
accessed as Blob fields. Subtype 1 is a LongVarChar, and Subtype 2 is
LongVarBinary.</P>
<P>Below is some example code written for use with Interclient that
may be helpful.</P>
<P><FONT SIZE=4>Storing BLOB Data:</FONT></P>
<P>The example given below shows a method that inserts an array of
bytes into a BLOB column in the database. The PreparedStatement class
is used so we can set the parameters independent of the actual SQL
command string. 
</P>
<P>Inserting a BLOB 
</P>
<PRE>import java.io.*;
import java.sql.*;
...
public void insertBlob( int rowid, byte[] bindata ) {
    // In this example I'm assuming there's an open, active
    // Connection instance called 'con'.
    // This examples uses an imaginary SQL table of the following
    // form:
    //
    // CREATE TABLE blobs (
    // ROWID INT NOT NULL,
    // ROWDATA BLOB,
    //
    // PRIMARY KEY (rowid)
    // );

    try {

        ByteArrayInputStream bais = new ByteArrayInputStream(bindata);
        String SQL = &quot;INSERT INTO blobs ( rowid, rowdata ) VALUES ( ?, ? )&quot;;
        PreparedStatement ps = con.prepareStatement(SQL);
        // Set up the parameter index for convenience (JDBC column
        // indices start from 1):
        int paramindex = 1;
        // Set the first parameter, the Row ID: 
        ps.setInt(paramindex++, rowid);
        // Now set the actual binary column data by passing the
        // ByteArrayInputStream instance and its length:
        ps.setBinaryStream(paramindex++, bais, bindata.length);
        // Finally, execute the command and close the statement:
        ps.executeUpdate();
        ps.close();
    } catch ( SQLException se ) {
        System.err.println(&quot;Couldn't insert binary data: &quot;+se);
    } catch ( IOException ioe ) {
        System.err.println(&quot;Couldn't insert binary data: &quot;+ioe);
    } finally {
        con.close();
    }
}</PRE><P>
<BR><BR>
</P>
<P><FONT SIZE=4>Retrieving BLOB Data:</FONT></P>
<P>The example given below shows a method that retrieves an array of
bytes from the database. 
</P>
<P>Selecting a BLOB 
</P>
<PRE>import java.io.*;
import java.sql.*;
...
public byte[] selectBlob( int rowid ) {
    // In this example I'm assuming there's an open, active
    // Connection instance called 'con'.
    // This examples uses an imaginary SQL table of the following
    // form:
    //
    // CREATE TABLE blobs (
    // ROWID INT NOT NULL,
    // ROWDATA BLOB,
    //
    // PRIMARY KEY (rowid)
    // );
    try {
        Statement sment = con.createStatement();
        String SQL = &quot;SELECT rowid, rowdata FROM blobs WHERE rowid = &quot; + rowid;
        ResultSet rs = sment.executeQuery(SQL);
        byte[] returndata = null;
        if ( rs.next() ) {
            try {
                // The ByteArrayOutputStream buffers all bytes written to it
                // until we call getBytes() which returns to us an array of bytes:
                ByteArrayOutputStream baos = new ByteArrayOutputStream(1024);
                // Create an input stream from the BLOB column. By default, rs.getBinaryStream()
                // returns a vanilla InputStream instance. We override this for efficiency
                // but you don't have to:
                BufferedInputStream bis = new BufferedInputStream( rs.getBinaryStream(&quot;fieldblob&quot;) );
                // A temporary buffer for the byte data:
                byte bindata[1024];
                // Used to return how many bytes are read with each read() of the input stream:
                int bytesread = 0;
                // Make sure its not a NULL value in the column:
                if ( !rs.wasNull() ) {
                    if ( (bytesread = bis.read(bindata,0,bindata.length)) != -1 ) {
                        // Write out 'bytesread' bytes to the writer instance:
                        baos.write(bindata,0,bytesread);
                    } else {
                        // When the read() method returns -1 we've hit the end of the stream,
                        // so now we can get our bytes out of the writer object:
                        returndata = baos.getBytes();
                    }
                }
                // Close the binary input stream:
                bis.close();
            } catch ( IOException ioe ) {
                System.err.println(&quot;Problem retrieving binary data: &quot; + ioe);
            } catch ( ClassNotFoundException cnfe ) {
                System.err.println(&quot;Problem retrieving binary data: &quot; + cnfe);
            }
        }
        rs.close();
        sment.close();
    } catch ( SQLException se ) {
        System.err.println(&quot;Couldn't retrieve binary data: &quot; + se);
    } finally {
        con.close();
    }
    return returndata;
}</PRE>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="11"></A><FONT SIZE=5>11- How do I use
different character sets with JayBird?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR><BR>
</P>
<P>Character Encodings:</P>
<P>Support for character encodings has just been added. This is
easily accessible only from the FBDriver class. To use it, request a
connection with a properties object containing a name-value pair
lc_ctype=WIN1250 or other appropriate encoding name.</P>
<P>URL-encoded params are fully supported only when you get a
connection from java.sql.DriverManager (using FBDriver class). For
example:
jdbc:firebirdsql://localhost//home/databases/sample.gdb?lc_ctype=UNICODE_FSS</P>
<P>It is also possible to set lc_ctype in a deployment descriptor by
adding the following to your deployment descriptor:</P>
<PRE>&lt;config-property&gt;
&lt;config-property-name&gt;Encoding&lt;/config-property-name&gt;
&lt;config-property-type&gt;java.lang.String&lt;/config-property-type&gt;
&lt;config-property-value&gt;UNICODE_FSS&lt;/config-property-value&gt;
&lt;/config-property&gt;</PRE><P>
<BR><BR>
</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="12"></A><FONT SIZE=5>12- How do I report
bugs?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR><BR>
</P>
<P>The developers attempt to follow the <A HREF="mailto:Firebird-Java@yahoogroups.com">Firebird-Java@yahoogroups.com</A>
list. Join the list (see<A HREF="#16"> #16</A> below) and post
information about suspected bugs. This is a good idea because what is
often thought to be a bug turns out to be something else. List
members may be able o help out and get you going again, whereas bug
fixes might take awhile.</P>
<P>You may also report bugs in the firebird bugtracker at:</P>
<P><A HREF="http://sourceforge.net/tracker/?group_id=9028&amp;atid=109028">http://sourceforge.net/tracker/?group_id=9028&amp;atid=109028</A></P>
<P><BR><BR>
</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="13"></A><FONT SIZE=5>13- How do I get
sources from SourceForge using CVS?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=CENTER><BR><BR>
</P>
<P>CVS is a source code control system for managing access to, and
synchronizing source code in a project that is being developed by
multiple programmers. A full explanation of CVS is beyond the scope
of this document, but information is available at sorceforge.net.</P>
<P>To get the project containing the source from SourceForge, install
CVS on your system and use it to download the module named
&quot;client-Java&quot;. The user name is &quot;anonymous&quot;.
CVSROOT is :pserver:anonymous@sourceforge.net:client-Java The server
is sourceforge.net. If you have secure shell capability and a
SourceForge account use &quot;:ext:&quot; instead of &quot;:pserver:&quot;,
then type in your password when prompted.</P>
<P>If you use a GUI based CVS tool like WinCVS or TortoiseCVS on
Windows, be sure that you also have your system set up to run CVS
from the command line.</P>
<P>This is necessary because the newest version of JayBird uses
libraries from the JBoss project to avoid licensing issues related to
distributing some libraries from Sun. The Ant build scripts use
command line CVS to check out the code needed from the JBoss project.</P>
<P>Tortoise is another good Windows based CVS tool.</P>
<P>Once you install these tools and download the source, you should
be able to go into the client-Java folder (wherever you had CVS put
it) and type &quot;build&quot; from the command line to build
JayBird.</P>
<P>There is a file in the client-Java directory called &quot;build.bat&quot;
for Windows systems and one called &quot;build.sh&quot; for Unix
systems. Under certain UNIX shells you will have to type &quot;build.sh&quot;
from the command line, the csh under Solaris, for example.</P>
<P><FONT SIZE=4>Tortoise CVS for Windows Users:</FONT> 
</P>
<P>There is a very easy CVS program for Windows users called
TortoiseCVS.</P>
<P>If you have access to a Windows box and don't want to learn CVS,
this is an easy way to get the daily updates.</P>
<P>NOTE: because the build scripts use the command line version of
CVS to download other projects, you need to also download WinCVS from
SourceForge and install it before you can do a build.</P>
<P>You can get it at www.tortoisecvs.org. Once you install it on your
windows box you can download a CVS project by simply right clicking
in a Windows Explorer subdirectory window and selecting CVS checkout.</P>
<P>A window will appear. Under module type in: client-java<BR>Under
server type: cvs.firebird.sourceforge.net<BR>Under repository
directory type: /cvsroot/firebird<BR>Under username type: anonymous</P>
<P>Click OK and a window will appear and show the files being
downloaded. A folder called client-java is created for the files.</P>
<P>Install WinCVS or another command line version of CVS.</P>
<P>It is a short download and has an installer so it is very easy to
install under windows.</P>
<P>After installing you should be able to open a command prompt
window and type cvs &lt;return&gt; and see an error from CVS.</P>
<P>If you try to build without command line CVS there will be an
error. If you then install command line CVS and try a build, it will
still fail unless you go into the client-java folder and delete the
folder called thirdparty.</P>
<P>The thirdparty folder is where all the external stuff is. If it
exists build will think everything is there, even though it isn't
because command line CVS failed.</P>
<P>To build the release, double click the build.bat file in the
client-java directory that is created.</P>
<P>Depending on the load on the SourceForge server, it might take
several minutes to download the files.</P>
<P>Subsequent updates only download the changed files so things go
quicker.</P>
<P>A window will open and show the build but will automatically close
when the build is done. If you want to see the progress of the build
(recommended) open a command prompt window cd to the client-java
directory and type &quot;build&quot; and hit return.</P>
<P>After the build is done you can scroll through the output messages
in the window.</P>
<P>To get to the jar files you need go into
...\client-java\output\lib.</P>
<P>With TortoiseCVS installed, the client-java directory icon looks
like a fuzzy green file folder. To get a new daily build, right click
on the folder and select CVS update.</P>
<P>If a particular build doesn't work properly, you can right click
and select CVS... to get a popup menu, select update special to bring
up a calendar. Pick the date that the code last worked for you and
TortoiseCVS will roll back your code to the daily build for that day.</P>
<P><BR><BR>
</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="14"></A><FONT SIZE=5>14- How can I
participate in the development project?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR><BR>
</P>
<P>Use the <A HREF="mailto:Firebird-Java@yahoogroups.com">Firebird-Java@yahoogroups.com</A>
list to contact the developers about helping out (see <A HREF="#16">#16</A>
below). Perhaps the most crucial need right now is for more and
better setup and usage guides, and to produce a reasonable section of
the Firebird web site devoted to this driver. Work on this would be
greatly appreciated.</P>
<P><BR><BR>
</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="15"></A><FONT SIZE=5>15- Where can I get
help?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR><BR>
</P>
<P>The Firebird-Java mail list: <A HREF="mailto:Firebird-Java@yahoogroups.com">Firebird-Java@yahoogroups.com</A>
(see <A HREF="#16">#16</A> below).</P>
<P>The code for Firebird and this driver are on <A HREF="http://www.sourceforge.net/">www.sourceforge.net</A>
under the Firebird project.</P>
<P>The SourceForge Firebird project home page <A HREF="http://www.firebirdsql.com/">www.firebirdsql.com</A>
or <A HREF="http://firebird.sourceforge.net/">firebird.sourceforge.net</A>.</P>
<P>The Firebird web site: <A HREF="http://www.IBPhoenix.com/">www.IBPhoenix.com</A></P>
<P>The Sun Java web site: <A HREF="http://java.sun.com/">java.sun.com</A></P>
<P>The Jboss web site: <A HREF="http://www.jboss.org/">www.jboss.org</A></P>
<P>The Jakarta Project Web Site for Ant, log4j, and Tomcat:
<A HREF="http://jakarta.apache.org/">jakarta.apache.org</A></P>
<P><BR><BR>
</P>
<P><BR><BR>
</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="16"></A><FONT SIZE=5>16- How do I join the
mailing list?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR><BR>
</P>
<P>To join the Firebird-java mailing list, go to <A HREF="www.yahoogroups.com">www.yahoogroups.com</A>.
Follow the instructions there for joining a group. The name of the
group is Firebird-java.</P>
<P>Please set your Yahoo settings to use plain text instead of HTML.
All the ads drive some folks nuts and cause an automatic Internet
hookup for some folks in Europe who have to pay for outgoing phone
calls.</P>
<P><BR><BR>
</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="17"></A><FONT SIZE=5>17- Are there any known
bugs?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=CENTER>&nbsp;</P>
<P>1) 575397: SERIALIZABLE is not isc_tpb_consistency - there is no
final agreement between developers about mapping.</P>
<P>2) 630749: implement isc_info_sql_stmt_savepoint - will be
implemented in JayBird 1.5.<BR><BR>3) 631090: Calling stored
procedures - cannot be fixed with current Firebird
implementation.<BR><BR>4) 638074: JUnit Errors in JayBird Build -
known issue, not driver problem, but test case problem.<BR><BR>5)
645725: getBestRowIdentifier() not working - not yet implemented.</P>
<P>Monitor firebird-java@yahoogroups.com for daily updates.</P>
<P>You may report bugs in the firebird bugtracker at
<A HREF="http://sourceforge.net/tracker/?group_id=9028&amp;atid=109028">http://sourceforge.net/tracker/?group_id=9028&amp;atid=109028</A>
</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="18"></A><FONT SIZE=5>18- What JVM and JARs
are needed to use JayBird?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P>&nbsp;</P>
<P>If you use JVM 1.3.1 or higher the jars included in the
distribution should have all the classes you need.</P>
<P>In addition to the jars in the distribution you may need jndi.jar
with some applications that use JVMs before 1.3.1. It is available
free from Sun at <A HREF="http://java.sun.com/products/jndi">http://java.sun.com/products/jndi</A>.
DreamWeaver UltraDev 4.0 is an example of such an application. It
uses a pre-1.3 JVM instead of the JVM installed in the system. The
jndi.jar file must be added for JayBird to work with UltraDev.</P>
<P>Many development systems also use internal VM's. If they are
pre-1.3.1 you may need to add jar files to the program's external
library folder or to the system classpath to add classes that the
older VM's lack.</P>
<P>If you see an errors about javax.naming.Referenceable, you are
probably missing jndi.jar, for example.</P>
<P>Many app servers already include jndi.jar, so you may not need to
download it. 
</P>
<P>All of the jars in the distribution are pretty small so it is not
much of a problem to include them all. If it does become a problem
and you want to eliminate classes that your app doesn't need, you
will need to go through the source files to see what you can live
without. Then you can use the jar utility to strip the unneeded files
out of the jars.</P>
<P>The list below gives you a rough idea what is in each jar.</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=5 CELLSPACING=0>
	<TR>
		<TD WIDTH=18%>
			<P>firebirdsql.jar</P>
		</TD>
		<TD WIDTH=82%>
			<P>The primary jar file. Required.</P>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=18%>
			<P>mini-j2ee.jar</P>
		</TD>
		<TD WIDTH=82%>
			<P>Contains DataSource and XA routines. Usually required.</P>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=18%>
			<P>mini-concurrent.jar</P>
		</TD>
		<TD WIDTH=82%>
			<P>Concurrency routines. Required.</P>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=18%>
			<P>firebirdsql.rar</P>
		</TD>
		<TD WIDTH=82%>
			<P>This is a J2EE server deployment file. Only needed for J2EE
			environments. 
			</P>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=18%>
			<P>firebirdjmx.jar</P>
		</TD>
		<TD WIDTH=82%>
			<P>Java Management Extension bean. Only needed if you want to play
			around with JMX.</P>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=18%>
			<P>jaas.jar</P>
		</TD>
		<TD WIDTH=82%>
			<P>This is the Java Authentication and Authorization Service. It
			is a standard part of jdk 1.4. If you are using jdk 1.4 or above,
			you do not need this file.</P>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=18%>
			<P>firebirdsql-test.jar</P>
		</TD>
		<TD WIDTH=82%>
			<P>Test routines, not needed for apps.</P>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=18%>
			<P>log4j-core.jar</P>
		</TD>
		<TD WIDTH=82%>
			<P>Include if you want logging available. Some environments like
			application servers may already include this.</P>
		</TD>
	</TR>
</TABLE>
<P>&nbsp;</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="19"></A><FONT SIZE=5>19- Why isn't JayBird
in one jar file?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P>&nbsp;</P>
<P>JayBird is now available as a single jar file:
firebirdsql-full.jar.</P>
<P>Some of the code was originally from Sun and they didn't allow
distribution by third parties without a license. To be scrupulously
legal you had to download the Sun jars separately. This was a pain so
equivalent classes from the JBoss Project were used instead. These
could be distributed but needed to be updated from the JBoss project
source, so they are in a separate jar (mini-j2ee.jar).</P>
<P>This combined with the fact that people are using the driver for
everything from running a backing store for J2EE servers to simple
database access in applets makes it hard to please everybody. So,
multiple jars are used and you can pick and choose from them as
needed.</P>
<P>The concurrency files are also from another project and are in a
separate jar with a subset of only the needed classes in the package
(mini-concurrent.jar), see:
<A HREF="http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/intro.html">http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/intro.html</A>
for details. 
</P>
<P>The firebirdsql-test.jar has routines that are used only for
testing at build time.</P>
<P>The other jars are less frequently used and are packaged
separately for easy removal.</P>
<P>If you are trying to build an app that you can distribute as an
executable jar, you are free to tear apart the jars and roll your
own.</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="20"></A><FONT SIZE=5>20- What are some
common errors? </FONT>
</P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P>&nbsp;</P>
<P><FONT SIZE=4>1. Wrong URL</FONT></P>
<P>The most common error is having the wrong URL format for the
database. 
</P>
<P>The two formats accepted are:</P>
<P>Standard format= jdbc:firebirdsql:[//host[:port]/]&lt;database&gt;
</P>
<P>FB old format= jdbc:firebirdsql:[host[/port]:]&lt;database&gt;</P>
<P><FONT SIZE=4>2. May need to put &quot;.gdb&quot; in the URL</FONT></P>
<P>Most Firebird/Interbase database file names end in &quot;.gdb&quot;.
People frequently forget to put that in the URL.</P>
<P><FONT SIZE=4>3. May need to define &quot;localhost&quot;</FONT></P>
<P>If you use &quot;localhost&quot; as the host name in your URL, be
sure that your server can resolve &quot;localhost&quot; to itself. A
simple test is to execute &quot;ping localhost&quot; from the command
line on the system that will be running JayBird. If the system can't
find localhost then you or the administrator must configure DNS on it
to do so, or you must use the IP number or the full domain name, i.e.
host.domain.com.</P>
<P><FONT SIZE=4>4. Incorrect spelling in xml files.</FONT></P>
<P>When using JBoss or Tomcat or any environment that uses XML files
for configuration, don't forget that case is important. Windows users
often make this mistake because Windows is insensitive to case.</P>
<P><BR><BR>
</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="21"></A><FONT SIZE=5>21. Is there any
compliance and performance information available?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<H2 STYLE="font-weight: medium"><FONT SIZE=4>Compliance Tests:</FONT></H2>
<P>The compliance was checked with <A HREF="http://www.jDataMaster.com/">jDataMaster</A>,
which include more than 1000 tests, excluding:</P>
<UL>
	<LI><P STYLE="margin-bottom: 0cm">CallableStatements 
	</P>
	<LI><P>Escape Syntax 
	</P>
</UL>
<P>FB type 4 driver pass all the tests excluding</P>
<UL>
	<LI><P STYLE="margin-bottom: 0cm">ResultSetMetaData.isReadOnly(i) 
	</P>
	<LI><P STYLE="margin-bottom: 0cm">ResultSetMetaData.isWritable(i) 
	</P>
	<LI><P>ResultSetMetaData.isDefinitivelyWritable(i) 
	</P>
</UL>
<P>The set/get tests don't include Blobs.</P>
<P>Firebird driver is the most JDBC compliant driver of those tested
with this tool, the next one fails on 90 tests, including all of the
most well known RDBMS.</P>
<P><BR><BR>
</P>
<H2 STYLE="font-weight: medium"><FONT SIZE=4>Performance tests
compared with Interclient</FONT></H2>
<P>The results of the jDataMaster basic performance tests, are the
following</P>
<P>Local test</P>
<P>Duron 800MHz with 512MB and FB 1.0 without forced Writes</P>
<TABLE BORDER=1 CELLPADDING=2 CELLSPACING=5>
	<TR>
		<TD>
			<P>&nbsp;</P>
		</TD>
		<TD>
			<P>Interclient</P>
		</TD>
		<TD>
			<P>Firebird Type 4</P>
		</TD>
		<TD>
			<P>FB as % of Interclient</P>
		</TD>
	</TR>
	<TR>
		<TD>
			<P>Insert 5000 records with autocommit</P>
		</TD>
		<TD>
			<P>8510 ms</P>
		</TD>
		<TD>
			<P>14307 ms</P>
		</TD>
		<TD>
			<P>168 %</P>
		</TD>
	</TR>
	<TR>
		<TD>
			<P>Read 5000 records with autocommit (x5)</P>
		</TD>
		<TD>
			<P>3052 ms</P>
		</TD>
		<TD>
			<P>3056 ms</P>
		</TD>
		<TD>
			<P>100 %</P>
		</TD>
	</TR>
	<TR>
		<TD>
			<P>Insert 5000 records with one transaction</P>
		</TD>
		<TD>
			<P>6650 ms</P>
		</TD>
		<TD>
			<P>5552 ms</P>
		</TD>
		<TD>
			<P>83 %</P>
		</TD>
	</TR>
	<TR>
		<TD>
			<P>Read 5000 records inside one transaction(x5)</P>
		</TD>
		<TD>
			<P>3990 ms</P>
		</TD>
		<TD>
			<P>3819 ms</P>
		</TD>
		<TD>
			<P>95 %</P>
		</TD>
	</TR>
</TABLE>
<P>Remote test</P>
<P>Client: Windows 2000 on Duron 800MHz with 512MB.<BR>Server: Suse
7.2 on AMD 500MHz with 256MB and FB 1.0.</P>
<TABLE BORDER=1 CELLPADDING=2 CELLSPACING=5>
	<TR>
		<TD>
			<P>&nbsp;</P>
		</TD>
		<TD>
			<P>Interclient</P>
		</TD>
		<TD>
			<P>Firebird Type 4</P>
		</TD>
		<TD>
			<P>FB as % of Interclient</P>
		</TD>
	</TR>
	<TR>
		<TD>
			<P>Insert 5000 records with autocommit</P>
		</TD>
		<TD>
			<P>16588 ms</P>
		</TD>
		<TD>
			<P>17525 ms</P>
		</TD>
		<TD>
			<P>106 %</P>
		</TD>
	</TR>
	<TR>
		<TD>
			<P>Read 5000x5 records with autocommit</P>
		</TD>
		<TD>
			<P>8082 ms</P>
		</TD>
		<TD>
			<P>6247 ms</P>
		</TD>
		<TD>
			<P>77 %</P>
		</TD>
	</TR>
	<TR>
		<TD>
			<P>Insert 5000 records with one transaction</P>
		</TD>
		<TD>
			<P>13009 ms</P>
		</TD>
		<TD>
			<P>6311 ms</P>
		</TD>
		<TD>
			<P>49 %</P>
		</TD>
	</TR>
	<TR>
		<TD>
			<P>Read 5000x5 records inside one transaction</P>
		</TD>
		<TD>
			<P>11639 ms</P>
		</TD>
		<TD>
			<P>8670 ms</P>
		</TD>
		<TD>
			<P>75 %</P>
		</TD>
	</TR>
</TABLE>
<P>The time in each test is the average of 5 executions.</P>
<P><BR><BR>
</P>
<P>June-24-2002</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="22"></A><FONT SIZE=5>22- What is the history
of JayBird?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P>The idea of writing a Java translation of the C client library and
using it in an all-Java driver originated in some discussions between
David Jencks and Jim Starkey. Alejandro Alberola provided the initial
translation of most of the client library functionality. David still
doesn't understand how he did it so quickly. David Jencks wrote the
JCA support and initial JDBC interfaces. Roman Rokytskyy wrote the
CallableStatement support, many of the trickier JDBC details, the
FBField implementation, and the character encoding support (among
many other things). Several others have contributed bug fixes.</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="23"></A><FONT SIZE=5>23- Where can I find an
updated FAQ and Release Notes? </FONT>
</P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P><BR>This FAQ is available in the JayBird download on SourceForge
and on the project home page at: 
</P>
<P><A HREF="http://firebird.sourceforge.net/">http://firebird.sourceforge.net</A></P>
<P>The release notes are also in the download or can be read on the
SourceForge Firebird site at:</P>
<P><A HREF="http://sourceforge.net/projects/firebird">http://sourceforge.net/projects/firebird</A></P>
<P>Find the entry &quot;firebird-jca-jdbc-driver&quot; in the table
and click on the small book icon to the right to see the release
notes.</P>
<P>The following link takes you to the JayBird FAQ at
www.IBPhoenix.com:</P>
<P><A HREF="http://www.ibphoenix.com/main.nfs?a=ibphoenix&amp;l=;IBPHOENIX.FAQS;NAME='JayBird'">http://www.ibphoenix.com/main.nfs?a=ibphoenix&amp;l=;IBPHOENIX.FAQS;NAME='JayBird'</A></P>
<P><BR><BR>
</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="24"></A><FONT SIZE=5>24- What tasks are left
to do?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=LEFT><FONT SIZE=3>JayBird is a stable product but there are
numerous additions and improvements that can be made. See the
firebird-java discussion group to make suggestions or find out what
others are working on.</FONT></P>
<OL>
	<LI><P ALIGN=LEFT><FONT SIZE=3>Implement the unimplemented methods
	listed in question 2 above.</FONT></P>
	<LI><P ALIGN=LEFT><FONT SIZE=3>Implement the unimplemented optional
	features listed in section 2 above, where possible.</FONT></P>
	<LI><P ALIGN=LEFT><FONT SIZE=3>Implement JDBC 3.0 functionality.</FONT></P>
	<LI><P ALIGN=LEFT><FONT SIZE=3>Optimize Performance.</FONT></P>
</OL>
<P ALIGN=CENTER><BR><BR>
</P>
<HR>
<P ALIGN=CENTER>&nbsp; 
</P>
<P ALIGN=CENTER><A NAME="25"></A><FONT SIZE=5>25- Where can I submit
corrections/additions to the release notes and FAQ?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=LEFT>&nbsp;</P>
<P ALIGN=LEFT>Please send corrections, suggestions, or additions to
these Release Notes to Rick Fincher at <A HREF="mailto:rnf@tbird.com">rnf@tbird.com</A>,
or to the developers on the SourceForge site, or post them to the
newsgroup at <A HREF="mailto:Firebird-Java@yahoogroups.com">Firebird-Java@yahoogroups.com</A>.</P>
<HR>
<P ALIGN=LEFT>&nbsp;</P>
<P ALIGN=CENTER><A NAME="26"></A><FONT SIZE=5>26- How do I turn off
logging?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=CENTER>&nbsp;</P>
<P ALIGN=LEFT>JayBird uses Log4J for logging. See:
<A HREF="http://jakarta.apache.org/log4j/docs/index.html">http://jakarta.apache.org/log4j/docs/index.htm</A>l
for more details about Log4J. 
</P>
<P ALIGN=LEFT>If you are using JayBird in JBoss, Tomcat, or other
server environments, you can usually control the logging from within
that application. See the documentation of those programs for more
info.</P>
<P ALIGN=LEFT>In a stand-alone app you need to put an entry like the
following in either a log4j.properties or xml file:</P>
<P ALIGN=LEFT>log4j.logger.org.firebirdsql=[DEBUG, INFO, WARN, ERROR,
FATAL]</P>
<P ALIGN=LEFT>To tell Java where to find the Log4J configuaration
file, you can use a flag like the following when you run your app:</P>
<P ALIGN=LEFT>java -Dlog4j.configuration=file:/c:/foobar.lcf myApp</P>
<P ALIGN=LEFT><BR><BR>
</P>
<P ALIGN=LEFT>&nbsp;</P>
<HR>
<P ALIGN=LEFT>&nbsp;</P>
<P ALIGN=CENTER><A NAME="27"></A><FONT SIZE=5>27- How do I use
JayBird with my development environment?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=LEFT>&nbsp;</P>
<P ALIGN=LEFT>You can use JayBird in most Java development
environments. Examples are NetBeans, Eclipse, SunOne Studio (formerly
Forte for Java) among many others. Look at your IDE's (Integrated
Development Environment) documentation under JDBC to find out how to
install the drivers.</P>
<P ALIGN=LEFT>DreamWeaver Ultradev from MacroMedia can also use the
JayBird driver to access Firebird databases. See question 31 below.</P>
<P ALIGN=LEFT>Many IDE's will let you develop web apps using servlets
and JSP's (Java Server Pages). Where you put the jars when developing
web apps may be different from the directories used for developing
stand-alone apps. See your IDE's directions for details.</P>
<P ALIGN=LEFT>In SunOne Studio (formerly Forte for Java) and NetBeans
(an open source version of the same program) a built-in version of
Tomcat is used as the default JSP/servlet container for the IDE when
developing web apps. The installation directories are different from
those described in the Tomcat instructions above. See the help files
included with these programs to find out where to install the jar
files.</P>
<P ALIGN=LEFT>Typically, there is a directory called ext in the
directory tree of the IDE where external jars are stored.</P>
<P ALIGN=LEFT>If all else fails when developing web apps, you can put
the jar files in the WEB-INF/lib folder during development. When you
deploy the web app you can remove theJayBird jars from WEB-INF/lib
and create your war file for deployment. Just be sure you have the
JayBird jars properly installed in the app server before using the
web app.</P>
<HR>
<P ALIGN=LEFT>&nbsp;</P>
<P ALIGN=CENTER><A NAME="28"></A><FONT SIZE=5>28- Does JayBird
provide any kind of security?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=LEFT>&nbsp;</P>
<P>Not directly. Firebird and InterBase do not currently support
secure connections internally. Therefore JayBird cannot. You must use
SSL with an application server, or an IP tunneling program to secure
your data in transit. These are both readily available. Secure
connections are possible, you just have to use external software to
get them.</P>
<P>One popular tunneling program is ZeBeDee. See<A HREF="http://www.ibphoenix.com/a471.htm">
http://www.ibphoenix.com/a471.htm</A> for more information and
examples of a secure Firebird setup.</P>
<P>There is a widely held misconception that Interclient/Interserver
provide a secure connection. All they do is encode the password used
to log in to the database. Data transactions after that are insecure
unless the above means are used to secure them.</P>
<P>Another method of securing your data is to write your application
as a web application that runs on an application server and displays
in a browser. Most app servers have secure access capability. In that
scenario Firebird and the app server are run on systems behind a
firewall. The web browser makes secure calls to the app server. The
app server then makes unsecure calls to the Firebird server using
Jaybird. Since both the app server and the firebird server are behind
the firewall, none of their transactions are visible to the outside
world. Port 3050 should be blocked at the firewall in such a scenario
to prevent unauthorized access or spoofing of Firebird.</P>
<P>This scenario will not prevent snooping from other systems behind
your firewall, so for best security you may want to put your servers
behind their own firewall.</P>
<P>If the application server and the Firebird server are on the same
machine, packets never reach the network, so snooping is more
difficult. Port 3050 will have to remain available, however, so the
system will not be completely secure.</P>
<HR>
<P ALIGN=LEFT>&nbsp;</P>
<P ALIGN=CENTER><A NAME="29"></A><FONT SIZE=5>29- Does JayBird
support dialect 1, 2, and 3 databases?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P>&nbsp;</P>
<P>JayBird was written to support dialect 3 databases and may have
problems with the earlier dialect 1 and 2 databases. Having said
that, many people are running legacy dialect 1 and 2 databases
without problems.</P>
<P>It is recommended that you migrate to dialect 3 databases as soon
as practical and always use dialect 3 for new development.</P>
<P>Firebird 1.5 and later releases will not support dialect 1 and 2
databases.</P>
<HR>
<P ALIGN=LEFT>&nbsp;</P>
<P ALIGN=CENTER><A NAME="30"></A><FONT SIZE=5>30- Why don't arguments
or ampersands (&amp;) work in my URL?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=CENTER>&nbsp;</P>
<P ALIGN=LEFT>If you are using an XML file to pass the parameters
(Tomcat, etc.) you must use &amp;amp; or &amp;#38; instead of the
ampersand (&amp;) alone.</P>
<P ALIGN=LEFT>In XML, the &amp; symbol is used to make references to
entities, so it is treated like a special character. The XML parser
expects to find something like &amp;entityname; That is why it must
end with the ';' delimiter.</P>
<P ALIGN=LEFT>If you see an error message like:</P>
<P ALIGN=LEFT>org.apache.commons.digester.Digester fatalError<BR>SEVERE:
Parse Fatal Error at line 62 column 94: The reference to entity
&quot;lc_ctype&quot; must end with the ';'
delimiter.<BR>org.xml.sax.SAXParseException: The reference to entity
&quot;lc_ctype&quot; must end with the ';' delimiter.</P>
<P ALIGN=LEFT>This is what is causing it.</P>
<P ALIGN=LEFT>Instead of:
...my.gdb?sql_role_name=guest&amp;lc_ctype=WIN1251</P>
<P ALIGN=LEFT>Use: ...my.gdb?sql_role_name=guest&amp;amp;lc_ctype=WIN1251</P>
<HR>
<P ALIGN=LEFT>&nbsp;</P>
<P ALIGN=CENTER><A NAME="31"></A><FONT SIZE=5>31- Why do I see &quot;????&quot;
instead of the correct characters?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=CENTER>&nbsp;</P>
<P ALIGN=LEFT>This problem is seen a lot with Tomcat and alternate
character sets. Resin and Jetty seem to work OK. There are two
possible sources of this error: a) database contains incorrect data
or b) The application handles this incorrecly.</P>
<P>The chain of translations is like this:</P>
<P>database byte[] -&gt; client-side byte[] (using lc_ctype) -&gt;
String instance (using corresponding Java encoding) -&gt; HTML page
encoding (depends on the implementation).</P>
<P>With lc_ctype=CP1254, for example, some Java code may use
String.getBytes() instead of String.getBytes(&quot;Cp1254&quot;), the
result depends on the default encoding of the JVM. If the default
encoding is not Cp1254, it will translate the correct unicode string
into &quot;????&quot;.</P>
<P>InterClient works because it receives the byte array from
InterServer in the encoding that it asked (Cp1254). The String is
constructed as &quot;new String(byte[])&quot;, and not as &quot;new
String(byte[], &quot;Cp1254&quot;)&quot;. Later &quot;str.getBytes()&quot;
will return bytes from that string without doing any unicode/charset
translation.</P>
<P>MySQL and JayBird work correctly, InterClient has a bug that
compensates for the bug in the code.</P>
<P>To fix it, try to run the JVM with -Dfile.encoding=Cp1254, so the
default encoding will be correct.</P>
<HR>
<P>&nbsp;</P>
<P ALIGN=CENTER><A NAME="32"></A><FONT SIZE=5>32- Can I use JayBird
with Open Office?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=CENTER>&nbsp;</P>
<P ALIGN=LEFT>Yes. Use the standard JayBird settings for the driver
class and URL. You must have Java installed on your system as well.</P>
<P ALIGN=LEFT>For example:</P>
<P ALIGN=LEFT>JDBC Driver class- org.firebirdsql.jdbc.FBDriver<BR>URL-
jdbc:firebirdsql:host.domain.com/3050:/(pathtodb)/(dbfile).gdb</P>
<P>Make sure the locations of the driver jars are in the classpath
box in the menu: tools-&gt;options-&gt;openoffice.org-&gt;security.</P>
<P>You can then use the data table tool in Open Office to extract
rows of the database directly into your spreadsheets and use the data
for any of the Open Office apps.</P>
<HR>
<P ALIGN=CENTER><A NAME="33"></A><FONT SIZE=5>33- How do I create a
new database with JayBird?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=LEFT>You can use the methods in FBManager in the package
org.firebirdsql.management to easily create a new database in your
programs. After creation you can connect to the database and use the
standard SQL calls to create tables and populate them. 
</P>
<P>This is an example:</P>
<PRE>String DB_SERVER_URL = &quot;localhost&quot;;<BR>int DB_SERVER_PORT = 3050;<BR>String DB_PATH = &quot;c:/database&quot;;<BR>String DB_NAME = &quot;test.gdb&quot;;<BR>String DB_USER = &quot;sysdba&quot;;<BR>String DB_PASSWORD = &quot;masterkey&quot;;
fbManager.setServer(DB_SERVER_URL);<BR>fbManager.setPort(DB_SERVER_PORT);
fbManager.start();
fbManager.createDatabase(DB_PATH + &quot;/&quot; + DB_NAME, DB_USER, DB_PASSWORD);</PRE><P>
After you have created the database you can set its default character
set with a command like:</P>
<PRE>UPDATE rdb$database SET rdb$character_set_name='ISO8859_1'</PRE>
<HR>
<P ALIGN=CENTER><A NAME="34"></A><FONT SIZE=5>34- How do I use
JayBird with Windows 95/98?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=LEFT>&nbsp;</P>
<P ALIGN=LEFT>You must upgrade to Winsock 2.0 to use JayBird with
Windows 95. See the Microsoft web site for details. Windows 98 uses
Winsock 2.0 by default, but in a very few cases when Windows is
upgraded from 95 to 98, Winsock 2.0 is not installed. See
<A HREF="http://www.sockets.com/winsock2.htm">http://www.sockets.com/winsock2.htm</A>
for more info.</P>
<HR>
<P ALIGN=CENTER>&nbsp;</P>
<P ALIGN=CENTER><A NAME="35"></A><FONT SIZE=5>35- Why does building
the CVS code fail?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=CENTER>&nbsp;</P>
<P ALIGN=LEFT>One of the primary reasons is that a command line
version of CVS is not installed. If you see a message about a cvs
failure, that is probably the reason. Type cvs&lt;return&gt; at a
command prompt. You should see error messages from CVS. If you get a
message from the system that CVS isn't found, it isn't properly
installed, or you need to set up a path to it for your shell.</P>
<P ALIGN=LEFT>If you see a message about missing files in the
thirdparty directory, you probably tried to build without command
line CVS. This creates a directory called thirdparty, but CVS can't
put the necessary files in it. The build script assumes the files are
there if the thirdparty directory exists, so the build fails. Delete
the thirdparty directory, make sure command line CVS is working and
try build again.</P>
<HR>
<P ALIGN=CENTER><A NAME="36"></A><FONT SIZE=5>36-</FONT> <FONT SIZE=5>Why
aren't my connections ever returned to the pool?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=CENTER>&nbsp;</P>
<P ALIGN=LEFT>Be sure that you close all statements and result sets
associated with a connection before closing a pooled connection.
Closing a pooled connection doesn't actually close it but returns it
to the pool. If it has active statements or result sets it can't be
reused. 
</P>
<P ALIGN=LEFT>Since closing a non-pooled connection automatically
closed statements and result sets associated with it, a lot of code
has been written that doen not explicitly close statements and result
sets. If you simply substitute a pooled connection in old code, it
may never properly close statements and result sets. 
</P>
<HR>
<P ALIGN=CENTER><A NAME="37"></A><FONT SIZE=5>37-</FONT> <FONT SIZE=5>How
do I use JayBird with DreamWeaver UltraDev?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=LEFT>UltraDev uses an internal Java JVM. The JVM in UltraDev
4 is a pre-1.3 version so you will need to obtain the jndi.jar file
and install it. The jndi.jar file is available from Sun at:
<A HREF="http://java.sun.com/products/jndi">http://java.sun.com/products/jndi</A>.</P>
<P ALIGN=LEFT>You must install the jars firebirdsql.jar,
mini-concurrent.jar, mini-j2ee.jar, and jndi.jar into the UltraDev
JDBCDrivers folder. On Windows machines this is typically at:</P>
<P ALIGN=LEFT>C:\Program Files\Macromedia\Dreamweaver UltraDev
4\Configuration\JDBCDrivers</P>
<P ALIGN=LEFT>See the UltraDev documentation for instructions on
installing on the Macintosh. This has not been tested by me but
should work OK.</P>
<P ALIGN=LEFT>To set up a connection pull down UltraDev's &quot;Modify&quot;
menu and select &quot;Connections...&quot;. A dialog box will pop up.
Select &quot;New&quot; and you will see a list of JDBC drivers.
Select &quot;Custom JDBC Connection&quot;.</P>
<P ALIGN=LEFT>Another dialog box will pop up. Type in the a name for
your new connection, the driver name, database URL string, username,
and password. Click the &quot;Test&quot; button to be sure that you
can connect to the database.</P>
<P ALIGN=LEFT>To add JayBird to the list JDBC drivers in the menu go
to the configuration/connections/jsp folder. Then open the Mac or Win
folder, depending on your OS. Under Windows this is typically at:</P>
<P ALIGN=LEFT>C:\Program Files\Macromedia\Dreamweaver UltraDev
4\Configuration\Connections\JSP\Win</P>
<P ALIGN=LEFT>Copy one of the existing html files (.htm under
Windows) into a new file with a name like &quot;jaybird_conn.htm&quot;.
Open your new file and change the following entries to the proper
info for Jaybird as in the example below:</P>
<P ALIGN=LEFT>&lt;TITLE&gt;JayBird JDBC Driver for Firebird&lt;/TITLE&gt;</P>
<P ALIGN=LEFT>...</P>
<P ALIGN=LEFT>//Global vars<BR>var DEFAULT_DRIVER =
&quot;org.firebirdsql.jdbc.FBDriver&quot;;<BR>var DEFAULT_TEMPLATE =
&quot;jdbc:firebirdsql:localhost/3050:[database name]&quot;;<BR>var
MSG_JayBirdDriverNotFound = &quot;JayBird Driver not found on
machine&quot;<BR>var MSG_DriverNotFound =
MSG_JayBirdDriverNotFound;<BR>var FILENAME = &quot;jaybird_conn.htm&quot;</P>
<P ALIGN=LEFT>Save this file and restart UltraDev. When you follow
the procedure above for creating a new connection you shoul now see
&quot;JayBird JDBC Driver for Firebird&quot; in the list of JDBC
drivers.</P>
<HR>
<P ALIGN=CENTER><A NAME="38"></A><FONT SIZE=5>38-</FONT> <FONT SIZE=5>Why
do I see a &quot;javax.naming.Referenceable&quot; error?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=LEFT>&nbsp;</P>
<P ALIGN=LEFT>If you see this error you probably need to include
jndi.jar in your classpath, or your application's external libraries
directory. You will need this jar if you are using JayBird with an
application that uses an internal JVM with a version prior to 1.3.</P>
<P ALIGN=LEFT>&nbsp;</P>
<HR>
<P ALIGN=CENTER><A NAME="39"></A><FONT SIZE=5>39-</FONT> <FONT SIZE=5>How
do I use stored procedures with JayBird?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=LEFT>&nbsp;</P>
<P ALIGN=LEFT>Jaybird does not fully support escaped syntax for
procedure calls (output parameters are not supported). However if you
use native Firebird syntax, stored procedures are fully supported. 
</P>
<P>Native Firebird syntax:</P>
<P>EXECUTE PROCEDURE proc_name(?, ?, ?, ...) for executable
procedures;<BR>SELECT * FROM proc_name(?, ?, ...) for selectable
procedures.</P>
<P>{call proc_name(?, ?, ...)} is translated into EXECUTE
PROCEDURE<BR>proc_name(?, ?, ?, ...) without any analysis. This means
that:</P>
<P>a) It is not usable for selectable stored procedures;<BR>b)
Positions of output params are independent of input params (in JDBC
they're not) and start with 1.</P>
<P>When you use native syntax, stored procedures can be called both
from PreparedStatement and from CallableStatement, in case of escaped
syntax - only from CallableStatement.</P>
<P><FONT SIZE=4>Examples</FONT> 
</P>
<P ALIGN=LEFT>The following example is a stripped-down version of
code taken from the project source code tests in the directory:</P>
<P ALIGN=LEFT>client-java/src/test/org/firebirdsql/jdbc/TestFBCallableStatement.java
</P>
<P ALIGN=LEFT>It creates a stored procedure called &quot;factorial&quot;
on the Firebird server that recursively calls itself to calculate
factorials. The method testRun shows how the stored procedure would
be called from Java. 
</P>
<P ALIGN=LEFT>To make this work you would have to add code to open
the java.sql.Connection called connection in this code snippet. You
would also have to close the connection, statements, etc. when you
are done</P>
<PRE><BR>public class TestFBCallableStatement {<BR>&nbsp;&nbsp;&nbsp;public static final String CREATE_PROCEDURE = &quot;&quot;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot;CREATE PROCEDURE factorial(number INTEGER, mode INTEGER) RETURNS (result INTEGER) &quot; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot;AS &quot; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot; DECLARE VARIABLE temp INTEGER; &quot; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot;BEGIN &quot; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot; temp = number - 1; &quot; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot; IF (NOT temp IS NULL) THEN BEGIN &quot; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot; IF (temp &gt; 0) THEN &quot; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot; EXECUTE PROCEDURE factorial(:temp, 0) RETURNING_VALUES :temp; &quot; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot; ELSE &quot; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot; temp = 1; &quot; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot; result = number * temp; &quot; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot; END &quot;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot; IF (mode = 1) THEN &quot;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot; SUSPEND; &quot;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &quot;END&quot;; 
&nbsp;&nbsp;&nbsp; public static final String DROP_PROCEDURE =<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;DROP PROCEDURE factorial;&quot;;
&nbsp;&nbsp;&nbsp;public static final String SELECT_PROCEDURE =<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;SELECT * FROM factorial(?, 1)&quot;;
&nbsp;&nbsp;&nbsp;public static final String EXECUTE_PROCEDURE =<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;{call factorial(?, 0)}&quot;;
&nbsp;&nbsp;&nbsp; private java.sql.Connection connection;
&nbsp;&nbsp;&nbsp;public TestFBCallableStatement(String testName) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//<BR>&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp; public void testRun() throws Exception {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// set up the connection before you call this <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java.sql.CallableStatement cstmt = connection.prepareCall(EXECUTE_PROCEDURE);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cstmt.setInt(1, 5);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cstmt.execute();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int ans = cstmt.getInt(1);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;assertTrue(&quot;got wrong answer, expected 120: &quot; + ans, ans == 120);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} finally {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cstmt.close();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java.sql.PreparedStatement stmt = connection.prepareStatement(SELECT_PROCEDURE);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stmt.setInt(1, 5);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; java.sql.ResultSet rs = stmt.executeQuery();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;assertTrue(&quot;Should have at least one row&quot;, rs.next());<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;int result = rs.getInt(1);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;assertTrue(&quot;Wrong result: expecting 120, received &quot; + result, result == 120);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; assertTrue(&quot;Should have exactly one row.&quot;, !rs.next());<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rs.close();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} finally {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stmt.close();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;// Tear down the connection here when you are done.<BR>&nbsp;&nbsp;&nbsp;}<BR>}
</PRE><P ALIGN=CENTER>
<A NAME="40"></A><FONT SIZE=5>40- Why are VARCHAR strings sometimes
padded?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=LEFT>&nbsp;</P>
<P ALIGN=LEFT>Till v.6.5 InterBase sent VARCHAR columns padded to the
full length with spaces (0x20) similar to CHAR. In 6.5 this was
changed by Borland so that VARCHARs are no longer padded, as
expected. IB 6.0 and FB 1.0 pads VARCHARs too. However, if FB 1.0 is
accessed via JayBird, it does NOT pad VARCHARs and sends them
correctly. 
</P>
<P>From one of the posts in the Firebird devel list this issue seems
to appear when using the gds32.dll under Windows but not with the
INET protocol.</P>
<HR>
<P ALIGN=CENTER><A NAME="41"></A><FONT SIZE=5>41- Can I use
CachedRowSet with JayBird?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P>Yes, but third party code must be used. CachedRowSet allows you to
store a copy of a rowSet and disconnect from the Firebird server for
processing. This is useful because it allows you to release a
connection immediately after getting a rowSet instead of holding it
open while the rowSet is processed. That allows the server to run
more efficiently</P>
<P>Two third-party implementations have been tested and seem to work
the same. 
</P>
<P>One is from Oracle: OracleCachedRowSet -- it doesn't require an
Oracle database but does require the Oracle JDBC jar file. You need
both ocrs12.zip and ojdbc14.jar.</P>
<P>See:
<A HREF="http://otn.oracle.com/software/tech/java/sqlj_jdbc/content.htm">http://otn.oracle.com/software/tech/java/sqlj_jdbc/content.htm</A>l
</P>
<P>&nbsp;</P>
<P>Another is an open source project called jxutil:
XDisconnectedRowSet -- only requires one jar file, jxRowSet-0.8a.jar.</P>
<P>See:<A HREF="http://sourceforge.net/projects/jxutil/">
http://sourceforge.net/projects/jxutil/</A></P>
<P>Depending on the intended use, it would be appropriate to study
the licenses both implementations come under.<BR>Jxutil is LGPL
(Limited Gnu Public License) software, while OracleCachedRowSet uses
the Oracle Technology Network Development and Distribution License.
See: <A HREF="http://otn.oracle.com/software/htdocs/distlic.html">http://otn.oracle.com/software/htdocs/distlic.html</A>.</P>
<HR>
<P ALIGN=CENTER><A NAME="dpb"></A><FONT SIZE=5>42- How do I pass
Database Parameter Buffer (DPB) parameters?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=CENTER>&nbsp;</P>
<P ALIGN=LEFT>If you use FBWrappingDataSource, you specify DPB
parameters in FBConnectionRequestInfo.</P>
<P ALIGN=LEFT>If you are using java.sql.DriverManager you can pass
any DPB parameter by stripping the &quot;isc_dpb_&quot; from the DPB
parameter name and putting it in the URL. In case of roles and
character encoding this could be:</P>
<P>...my.gdb?sql_role_name=guest&amp;lc_ctype=WIN1251</P>
<P>See the InterBase API Guide Chapter 4, &quot;Working with
Databases&quot; for more details. The following table is a listing of
DPB parameters.</P>
<CENTER>
	<TABLE WIDTH=90% BORDER=1 CELLPADDING=5 CELLSPACING=0>
		<TR>
			<TD WIDTH=19%>
				<P ALIGN=CENTER>DPB Parameter</P>
			</TD>
			<TD WIDTH=28%>
				<P ALIGN=CENTER>Description</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>Length</P>
			</TD>
			<TD WIDTH=38%>
				<P ALIGN=CENTER>Values</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_activate_shadow</P>
			</TD>
			<TD WIDTH=28%>
				<P>Directive to activate the database shadow, which is an
				optional, duplicate, in-sync copy of the database</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>1</P>
			</TD>
			<TD WIDTH=38%>
				<P>1 (Ignored) 0 (Ignored)</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_damaged</P>
			</TD>
			<TD WIDTH=28%>
				<P>Number signifying whether or not the database<BR>should be
				marked as damaged</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>1</P>
			</TD>
			<TD WIDTH=38%>
				<P>1 = mark as damaged<BR>0 = do not mark as damaged</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_dbkey_scope</P>
			</TD>
			<TD WIDTH=28%>
				<P>Scope of dbkey context</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>1</P>
			</TD>
			<TD WIDTH=38%>
				<P>0 limits scope to the current transaction, 1 extends scope to
				the database session</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_delete_shadow</P>
			</TD>
			<TD WIDTH=28%>
				<P>Directive to delete a database shadow that is no<BR>longer
				needed</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>1</P>
			</TD>
			<TD WIDTH=38%>
				<P>1(Ignored) 0 (Ignored)</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_encrypt_key</P>
			</TD>
			<TD WIDTH=28%>
				<P>String encryption key</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>up to 255 characters</P>
			</TD>
			<TD WIDTH=38%>
				<P><BR>String containing key</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_force_write</P>
			</TD>
			<TD WIDTH=28%>
				<P>Specifies whether database writes<BR>are synchronous or
				asynchronous.</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>1</P>
			</TD>
			<TD WIDTH=38%>
				<P>0 = asynchronous; 1 = synchronous</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_lc_ctype</P>
			</TD>
			<TD WIDTH=28%>
				<P>String specifying the character set to be utilized</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>number of bytes in string</P>
			</TD>
			<TD WIDTH=38%>
				<P>String containing character set name</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_lc_messages</P>
			</TD>
			<TD WIDTH=28%>
				<P>String specifying a language-specific message file</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>Number of bytes<BR>in string</P>
			</TD>
			<TD WIDTH=38%>
				<P>String containing<BR>message file name</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_no_reserve</P>
			</TD>
			<TD WIDTH=28%>
				<P>Specifies whether or not a small amount of space on each
				database page is reserved for holding backup<BR>versions of
				records when modifications are made;<BR>keep backup versions on
				the same page as the primary record to optimize update activity.</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>1</P>
			</TD>
			<TD WIDTH=38%>
				<P>0 (default) = reserve space<BR>1= do not reserve space</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_num_buffers</P>
			</TD>
			<TD WIDTH=28%>
				<P>Number of database cache buffers to allocate for use<BR>with
				the database; default=75</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>1</P>
			</TD>
			<TD WIDTH=38%>
				<P>Number of buffers to<BR>allocate</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_password</P>
			</TD>
			<TD WIDTH=28%>
				<P>String password</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>up to 255 characters 
				</P>
			</TD>
			<TD WIDTH=38%>
				<P>String containing password</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_password_enc</P>
			</TD>
			<TD WIDTH=28%>
				<P>String encrypted password</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>up to 255 characters</P>
			</TD>
			<TD WIDTH=38%>
				<P>String containing<BR>password</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_sql_role_name</P>
			</TD>
			<TD WIDTH=28%>
				<P>String Role Name</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>up to 255 characters</P>
			</TD>
			<TD WIDTH=38%>
				<P>String containing Role Name</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19%>
				<P>isc_dpb_sys_user_name</P>
			</TD>
			<TD WIDTH=28%>
				<P>String system DBA name</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>up to 255 characters</P>
			</TD>
			<TD WIDTH=38%>
				<P>String containing<BR>SYSDBA name</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=19% HEIGHT=68>
				<P>isc_dpb_user_name</P>
			</TD>
			<TD WIDTH=28%>
				<P>String user name</P>
			</TD>
			<TD WIDTH=15%>
				<P ALIGN=CENTER>up to 255 characters</P>
			</TD>
			<TD WIDTH=38%>
				<P>String containing<BR>user name</P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<P>&nbsp;</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="43"></A><FONT SIZE=5>43- What is a good
validation query to use with JayBird?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P>&nbsp;</P>
<P>Some programs and web applications need a query that they can send
to the database to verify that it is online and connected, or to
insure that a connection hasn't timed out. That is called a
validation query. A good one for Firebird/JayBird is:</P>
<P>SELECT CAST(1 AS INTEGER) FROM rdb$database<BR><BR>This select
will always succeed if the connection is still alive and will have
exactly one row in the result set..</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="44"></A><FONT SIZE=5>44- How can I get the
key of the new record I just inserted?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P>Sometimes it is necessary to get the Primary Key of a record just
inserted so that it can be used as the relation in an insert into
another table. If you are using a generator and trigger to
auto-generate keys and insert them in new records, you do not know
what the key is.</P>
<P>A solution is to get a key from the generator before you do the
insert, then use that key to do the insert in both tables.</P>
<P>Getting a new key is simple but you have to modify the trigger to
skip getting a new key if a key is supplied in the insert statement.
In this way the database will still auto-generate keys if you like or
it will use keys you supply.</P>
<P>To get a new primary key to insert with use:</P>
<P><FONT FACE="Courier, monospace">SELECT gen_id(my_generator, 1)
FROM RDB$DATABASE</FONT></P>
<P>This fires your generator and returns the new key in the result
set. The following sets up the trigger so that it will auto create
the primary key if you don't pass it one in the insert, but will also
use one that you give it (generated above) without generating another
one. So insert will work either way.</P>
<P>Create the trigger:</P>
<P><BR><FONT FACE="Courier, monospace">active before
insert<BR>as<BR>begin<BR>if (new.YourPk is null) then<BR>new.YourPk =
gen_id(my_generator, 1);<BR>end</FONT><BR><BR>Trigger generation is
outside of transaction control (the only thing that is!) so it is
guaranteed to be 100% atomic. In other words, this will always safely
give you a unique key.</P>
<P>You may get better performance by creating a pool of keys to use
for inserts. You could generate a block of keys at startup, then your
inserts will go quicker.</P>
<P>To create a block of 100 keys, for example, use:</P>
<P><FONT FACE="Courier, monospace">SELECT gen_id(my_generator, 100)
FROM RDB$DATABASE</FONT></P>
<P>This will return the last number in the block. If that number is
myKey, you can use numbers from( myKey-99) through myKey.</P>
<P>&nbsp;</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="45"></A><FONT SIZE=5>45-How do I set the
default character set of a database?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P>After you have created the database (See FAQ item 33) you can set
its default character set with a command like:</P>
<P><FONT FACE="Courier New, Courier, mono">UPDATE rdb$database SET
rdb$character_set_name='ISO8859_1'</FONT></P>
<P>Be sure to do this before creating tables. Tables created before
the default charset is changed will have the old default charset and
will not be affected by the change, unless explicitly set to
something else.</P>
<P>You must also open the connection to the database with lc_ctype
set to the same character set as the database for character
translations to work properly.</P>
<HR>
<P ALIGN=CENTER><A NAME="46"></A><FONT SIZE=5>46- Can you explain how
character sets work?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P>Character handling with JayBird can be confusing because the Java
VM, Firebird database, browser, and JayBird Connection all have a
charset associated with them. 
</P>
<P>Also, the Firebird server attempts to transliterate the internal
charset of a database to the charset specified in the connection.
JayBird also attempts to translate the JVM charset to the Firebird
server charsets specfied in the connection.</P>
<P>With Firebird the character encoding of the text data stored in
the database is set when the database is created. That applies to the
char and varchar columns, and type 1 blobs (text blobs). You can
override the default charset for columns with the appropriate SQL
commands when the columns are created. Be careful if you do this or
you may end up with two columns in the same table that you can't read
with the same connection.</P>
<P>The only situation when this problem can happen is when you have a
table with columns that have the &quot;NONE&quot; character set and
some other character set (&quot;UNICODE_FSS&quot;, &quot;WIN1252&quot;,
etc). The server tries to convert characters from the encoding
specified for the column into the encoding specified for connection.
The &quot;NONE&quot; character set allows only one-way conversion:
from &lt;any&gt; to &quot;NONE&quot;. In this case server simply
returns you bytes written in the database. So if you have table:</P>
<P><FONT FACE="Courier New, Courier, mono">CREATE TABLE
charset_table(<BR>col1 VARCHAR(10) CHARACTER SET WIN1252,<BR>col2
VARCHAR(10) CHARACTER SET NONE<BR>)</FONT></P>
<P>you will not be able to modify both columns in the same SQL
statement, and it does not matter whether you use &quot;NONE&quot;,
&quot;WIN1252&quot; or &quot; UNICODE_FSS&quot; for the connection.</P>
<P>The only possible way to solve this problem is to use character
set &quot;OCTETS&quot;. This is some kind of artificial character
set, similar to &quot;NONE&quot; (data are written and read as byte
arrays), however there exist bi-directional translation rules between
any character set (incl.&quot;NONE&quot;) and &quot;OCTETS&quot;. You
can specify &quot;OCTETS&quot; for connection and then decode byte
arrays you receive from the server yourself, the driver will do
byte-array-to-string conversion incorrectly, since it does not get a
hint about the character set from the server.</P>
<P>Let's say your program or web app prompts the user to type a
string. If the user types &quot;abc&quot; into a Java text box in
your app, or into a text box in a browser for a web app, Java creates
a string for that 3 character string in Unicode. So the string would
actually have 9 bytes in it- three Unicode characters of three bytes
each.</P>
<P>INSERTing this in a text column in the database would result in
nine bytes being inserted without translation.</P>
<P>Note: You have to pass correct unicode strings to the driver. What
is &quot;correct unicode&quot; string? It is easier to explain what
is not a correct unicode string. 
</P>
<P>Let's assume you have normal text file in WIN1251 encoding. In
this case cyrillic characters from the unicode table (values between
0-65535) are mapped into the characters with values 0-255. However,
your regional settings say that you're in Germany. This means that
file.encoding will be set to Cp1252 on JVM start. If you now open the
file and construct a reader without specifying that character
encoding is Cp1251, Java will read the file and construct your
strings. However all cyrillic characters will be replaced by
characters from the Cp1252 encoding that have the same number
representation as the cyrillic ones. 
</P>
<P>These strings are valid unicode strings, however their content is
not the content you read from the file. Interestingly enough, if you
write such strings back into the file, and open it in some text
editor saying that this is WIN1251 text, you will see correct text.</P>
<P>If you open your connection to the database without specifying a
character set (lc_ctype) it defaults to NONE and no translation is
done. So when you SELECT the previously inserted data from the
database and display it in your program you get the same string you
entered, right? Well, not necessarily.</P>
<P>You will get a string with the same nine bytes in it that were
stored, but if the user getting that string from the database has a
different default charset in his Java VM those bytes will display
differently.</P>
<P>The JVM usually picks up its locale dependent character encoding
from the underlying operating system, but it can also be set when you
invoke the JVM by using -Dfile.encoding=Cp1252, for example. If you
attempt to display characters that aren't in your default JVM
encoding they apear as '?'.</P>
<P>The only way to insure you always get back what you put in is to
create the database with a charset and set lc_ctype to the same
charset when you open the connection to that database.</P>
<P>If want to use charsets other than NONE and you have lots of data
in databases with a charset of NONE, you may have to set up a new
database with a different charset and use a data pump to transfer
data over, or write a small program to do the transfer.</P>
<P>Using UNICODE_FSS works well nearly everywhere but may increase
the size of your databases if you have lots of text because Unicode
uses characters up to 3 bytes long.</P>
<P>There are some limitations regarding UNICODE_FSS character set:
there's only one collation, where strings are sorted by the natural
order, and not collation rules for different languages; there are
some issues when converting them to upper case, etc. More information
on these anomalies can be found in the Firebird-Support group.</P>
<P>Again, the default charset for Firebird is NONE. The Firebird
server does no translation with this charset.</P>
<P>If your database has a charset of NONE and you set a charset type
on the connection (lc_ctype) that is not NONE, you can write to the
database but you can't read from it without getting the &quot;Cannot
transliterate between character sets&quot; exception.</P>
<P>Let's follow a string as it gets inserted into the database and
later selected from the database. For this example we will set the
database charset to NONE.</P>
<P>See the freely available Interbase 6 PDF manuals &quot;Data
Definition Guide&quot; for a list of charsets available.</P>
<P>The WIN125X or ISO8859_1 charsets may be a good choice for you if
you need the non-English characters but want the compactness of the 1
byte characters. With these char sets you can specify many different
national language collation orders in the ORDER BY clause of the
SELECT statement.</P>
<P>Let's look at the same example above, but this time we will insert
into a database that has been created with a charset of WIN1251.</P>
<P>When you open the connection to the database you set the
lc_ctype=WIN1251. Then insert the string 'abc' into the appropriate
column. JayBird has to take the Unicode encoded Java String &quot;abc&quot;and
convert it to WIN1251 format and send it to the database server for
insertion. Since the database is already in WIN1251 format, the
server does not have to translate. When the string is read back from
the database it is converted back to the Java VM format by JayBird.</P>
<P>It is also possible to set an lc_ctype in a connection that is
different from the charset of the database. This lets the database
server do the translating from one charset to another. This is a
feature of the Firebird server that lets programming languages or
programs that require specific character formats to connect to the
database without requiring the data to be stored in that format.</P>
<P>You can also avoid problems by using java.sql.PreparedStatement
instead of java.sql.Statement and not building SQL strings out of
concatenated Java strings. For example:</P>
<P>String sqlString, firstName=&quot;John&quot;, lastName=&quot;O'Neal&quot;;</P>
<P>sqlString = &quot;INSERT INTO nameTable (LNAME, FNAME)
VALUES('&quot;+lastName+&quot;','&quot;+firstName+&quot;')&quot;;</P>
<P>Statement stmt = connection.createStatement();<BR>int insertedRows
= stmt.executeUpdate(sqlString);</P>
<P>The problem here is that if the user types in data for these
strings you might end up with illegal characters, or the translation
might not be correct.</P>
<P>In the example above, the following illegal SQL string would be
generated and cause an exception to be thrown because of the
apostrophe in O'Neil:</P>
<P>INSERT INTO nameTable (LNAME, FNAME) VALUES('O'Neal', 'John')</P>
<P>To avoid this, use a prepared statement like in the example below.</P>
<P>PreparedStatement stmt = connection.prepareStatement(&quot;INSERT
INTO<BR>nameTable(LNAME,FNAME) VALUES(?, ?)&quot;);</P>
<P>stmt.setString(1, lastName);<BR>stmt.setString(2, firstName);</P>
<P>int insertedRows = stmt.executeUpdate();</P>
<P>if (insertedRows != 1)<BR>throw new MyInsertFailedException(&quot;Could
not insert data&quot;);</P>
<HR>
<P><BR><BR>
</P>
<P ALIGN=CENTER><A NAME="codeexamples"></A><FONT SIZE=5>47- Can you
give me some code examples?</FONT></P>
<P ALIGN=CENTER><A HREF="#top">return to top</A></P>
<P ALIGN=CENTER><BR><BR>
</P>
<P>Yes we can. There are two examples below, a driver example and a
DataSource example that are extensively commented.</P>
<P><FONT SIZE=4>Driver Example:</FONT></P>
<P><FONT FACE="Courier, monospace">// Original version of this file
was part of InterClient 2.01 examples</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// Copyright InterBase Software
Corporation, 1998.</FONT></P>
<P><FONT FACE="Courier, monospace">// Written by
com.inprise.interbase.interclient.r&amp;d.PaulOstler :-)</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// Code was modified by Roman
Rokytskyy to show that Firebird JCA-JDBC driver</FONT></P>
<P><FONT FACE="Courier, monospace">// does not introduce additional
complexity in normal driver usage scenario.</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// A small application to
demonstrate basic, but not necessarily simple, JDBC features.</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// Note: you will need to hardwire
the path to your copy of employee.gdb</FONT></P>
<P><FONT FACE="Courier, monospace">// as well as supply a
user/password in the code below at the</FONT></P>
<P><FONT FACE="Courier, monospace">// beginning of method main().</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">public class DriverExample</FONT></P>
<P><FONT FACE="Courier, monospace">{</FONT></P>
<P><FONT FACE="Courier, monospace">// Make a connection to an
employee.gdb on your local machine,</FONT></P>
<P><FONT FACE="Courier, monospace">// and demonstrate basic JDBC
features.</FONT></P>
<P><FONT FACE="Courier, monospace">// Notice that main() uses its own
local variables rather than</FONT></P>
<P><FONT FACE="Courier, monospace">// static class variables, so it
need not be synchronized.</FONT></P>
<P><FONT FACE="Courier, monospace">public static void main (String
args[]) throws Exception</FONT></P>
<P><FONT FACE="Courier, monospace">{</FONT></P>
<P><FONT FACE="Courier, monospace">// Modify the following hardwired
settings for your environment.</FONT></P>
<P><FONT FACE="Courier, monospace">// Note: localhost is a TCP/IP
keyword which resolves to your local machine's IP address.</FONT></P>
<P><FONT FACE="Courier, monospace">// If localhost is not recognized,
try using your local machine's name or</FONT></P>
<P><FONT FACE="Courier, monospace">// the loopback IP address
127.0.0.1 in place of localhost.</FONT></P>
<P><FONT FACE="Courier, monospace">String databaseURL =
&quot;jdbc:firebirdsql:localhost/3050:c:/database/employee.gdb&quot;;</FONT></P>
<P><FONT FACE="Courier, monospace">String user = &quot;sysdba&quot;;</FONT></P>
<P><FONT FACE="Courier, monospace">String password = &quot;masterkey&quot;;</FONT></P>
<P><FONT FACE="Courier, monospace">String driverName =
&quot;org.firebirdsql.jdbc.FBDriver&quot;;</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// As an exercise to the reader,
add some code which extracts databaseURL,</FONT></P>
<P><FONT FACE="Courier, monospace">// user, and password from the
program args[] to main().</FONT></P>
<P><FONT FACE="Courier, monospace">// As a further exercise, allow
the driver name to be passed as well,</FONT></P>
<P><FONT FACE="Courier, monospace">// and modify the code below to
use driverName rather than the hardwired</FONT></P>
<P><FONT FACE="Courier, monospace">// string
&quot;org.firebirdsql.jdbc.FBDriver&quot; so that this code becomes</FONT></P>
<P><FONT FACE="Courier, monospace">// driver independent. However,
the code will still rely on the</FONT></P>
<P><FONT FACE="Courier, monospace">// predefined table structure of
employee.gdb.</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// See comment about closing JDBC
objects at the end of this main() method.</FONT></P>
<P><FONT FACE="Courier, monospace">System.runFinalizersOnExit (true);</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Here are the JDBC objects we're
going to work with.</FONT></P>
<P><FONT FACE="Courier, monospace">// We're defining them outside the
scope of the try block because</FONT></P>
<P><FONT FACE="Courier, monospace">// they need to be visible in a
finally clause which will be used</FONT></P>
<P><FONT FACE="Courier, monospace">// to close everything when we are
done.</FONT></P>
<P><FONT FACE="Courier, monospace">// The finally clause will be
executed even if an exception occurs.</FONT></P>
<P><FONT FACE="Courier, monospace">java.sql.Driver d = null;</FONT></P>
<P><FONT FACE="Courier, monospace">java.sql.Connection c = null;</FONT></P>
<P><FONT FACE="Courier, monospace">java.sql.Statement s = null;</FONT></P>
<P><FONT FACE="Courier, monospace">java.sql.ResultSet rs = null;</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Any return from this try block
will first execute the finally clause</FONT></P>
<P><FONT FACE="Courier, monospace">// towards the bottom of this
file.</FONT></P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Let's try to register the
Firebird JCA-JDBC driver with the driver manager</FONT></P>
<P><FONT FACE="Courier, monospace">// using one of various
registration alternatives...</FONT></P>
<P><FONT FACE="Courier, monospace">int registrationAlternative = 1;</FONT></P>
<P><FONT FACE="Courier, monospace">switch (registrationAlternative) {</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">case 1:</FONT></P>
<P><FONT FACE="Courier, monospace">// This is the standard
alternative and simply loads the driver class.</FONT></P>
<P><FONT FACE="Courier, monospace">// Class.forName() instructs the
java class loader to load</FONT></P>
<P><FONT FACE="Courier, monospace">// and initialize a class. As part
of the class initialization</FONT></P>
<P><FONT FACE="Courier, monospace">// any static clauses associated
with the class are executed.</FONT></P>
<P><FONT FACE="Courier, monospace">// Every driver class is required
by the JDBC specification to automatically</FONT></P>
<P><FONT FACE="Courier, monospace">// create an instance of itself
and register that instance with the driver</FONT></P>
<P><FONT FACE="Courier, monospace">// manager when the driver class
is loaded by the java class loader</FONT></P>
<P><FONT FACE="Courier, monospace">// (this is done via a static
clause associated with the driver class).</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// Notice that the driver name
could have been supplied dynamically,</FONT></P>
<P><FONT FACE="Courier, monospace">// so that an application is not
hardwired to any particular driver</FONT></P>
<P><FONT FACE="Courier, monospace">// as would be the case if a
driver constructor were used, eg.</FONT></P>
<P><FONT FACE="Courier, monospace">// new
org.firebirdsql.jdbc.FBDriver().</FONT></P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><FONT FACE="Courier, monospace">Class.forName
(&quot;org.firebirdsql.jdbc.FBDriver&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch
(java.lang.ClassNotFoundException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">// A call to Class.forName()
forces us to consider this exception :-)...</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Firebird
JCA-JDBC driver not found in class path&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (e.getMessage
());</FONT></P>
<P><FONT FACE="Courier, monospace">return;</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">break;</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">case 2:</FONT></P>
<P><FONT FACE="Courier, monospace">// There is a bug in some JDK 1.1
implementations, eg. with Microsoft</FONT></P>
<P><FONT FACE="Courier, monospace">// Internet Explorer, such that
the implicit driver instance created during</FONT></P>
<P><FONT FACE="Courier, monospace">// class initialization does not
get registered when the driver is loaded</FONT></P>
<P><FONT FACE="Courier, monospace">// with Class.forName().</FONT></P>
<P><FONT FACE="Courier, monospace">// See the FAQ at
<A HREF="http://java.sun.com/jdbc">http://java.sun.com/jdbc</A> for
more info on this problem.</FONT></P>
<P><FONT FACE="Courier, monospace">// Notice that in the following
workaround for this bug, that if the bug</FONT></P>
<P><FONT FACE="Courier, monospace">// is not present, then two
instances of the driver will be registered</FONT></P>
<P><FONT FACE="Courier, monospace">// with the driver manager, the
implicit instance created by the driver</FONT></P>
<P><FONT FACE="Courier, monospace">// class's static clause and the
one created explicitly with newInstance().</FONT></P>
<P><FONT FACE="Courier, monospace">// This alternative should not be
used except to workaround a JDK 1.1</FONT></P>
<P><FONT FACE="Courier, monospace">// implementation bug.</FONT></P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><FONT FACE="Courier, monospace">java.sql.DriverManager.registerDriver
(</FONT></P>
<P><FONT FACE="Courier, monospace">(java.sql.Driver) Class.forName
(&quot;org.firebirdsql.jdbc.FBDriver&quot;).newInstance ()</FONT></P>
<P><FONT FACE="Courier, monospace">);</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch
(java.lang.ClassNotFoundException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">// A call to Class.forName()
forces us to consider this exception :-)...</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Driver
not found in class path&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (e.getMessage
());</FONT></P>
<P><FONT FACE="Courier, monospace">return;</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch
(java.lang.IllegalAccessException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">// A call to newInstance() forces
us to consider this exception :-)...</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Unable
to access driver constructor, this shouldn't happen!&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (e.getMessage
());</FONT></P>
<P><FONT FACE="Courier, monospace">return;</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch
(java.lang.InstantiationException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">// A call to newInstance() forces
us to consider this exception :-)...</FONT></P>
<P><FONT FACE="Courier, monospace">// Attempt to instantiate an
interface or abstract class.</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Unable
to create an instance of driver class, this shouldn't happen!&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (e.getMessage
());</FONT></P>
<P><FONT FACE="Courier, monospace">return;</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch (java.sql.SQLException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">// A call to registerDriver()
forces us to consider this exception :-)...</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Driver
manager failed to register driver&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">showSQLException (e);</FONT></P>
<P><FONT FACE="Courier, monospace">return;</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">break;</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">case 3:</FONT></P>
<P><FONT FACE="Courier, monospace">// Add the Firebird JCA-JDBC
driver name to your system's jdbc.drivers property list.</FONT></P>
<P><FONT FACE="Courier, monospace">// The driver manager will load
drivers from this system property list.</FONT></P>
<P><FONT FACE="Courier, monospace">// System.getProperties() may not
be allowed for applets in some browsers.</FONT></P>
<P><FONT FACE="Courier, monospace">// For applets, use one of the
Class.forName() alternatives above.</FONT></P>
<P><FONT FACE="Courier, monospace">java.util.Properties sysProps =
System.getProperties ();</FONT></P>
<P><FONT FACE="Courier, monospace">StringBuffer drivers = new
StringBuffer (&quot;org.firebirdsql.jdbc.FBDriver&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">String oldDrivers =
sysProps.getProperty (&quot;jdbc.drivers&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">if (oldDrivers != null)</FONT></P>
<P><FONT FACE="Courier, monospace">drivers.append (&quot;:&quot; +
oldDrivers);</FONT></P>
<P><FONT FACE="Courier, monospace">sysProps.put (&quot;jdbc.drivers&quot;,
drivers.toString ());</FONT></P>
<P><FONT FACE="Courier, monospace">System.setProperties (sysProps);</FONT></P>
<P><FONT FACE="Courier, monospace">break;</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">case 4:</FONT></P>
<P><FONT FACE="Courier, monospace">// Advanced: This is a
non-standard alternative, and is tied to</FONT></P>
<P><FONT FACE="Courier, monospace">// a particular driver
implementation, but is very flexible.</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// It may be possible to configure
a driver explicitly, either thru</FONT></P>
<P><FONT FACE="Courier, monospace">// the use of non-standard driver
constructors, or non-standard</FONT></P>
<P><FONT FACE="Courier, monospace">// driver &quot;set&quot; methods
which somehow tailor the driver to behave</FONT></P>
<P><FONT FACE="Courier, monospace">// differently from the default
driver instance.</FONT></P>
<P><FONT FACE="Courier, monospace">// Under this alternative, a
driver instance is created explicitly</FONT></P>
<P><FONT FACE="Courier, monospace">// using a driver specific
constructor. The driver may then be</FONT></P>
<P><FONT FACE="Courier, monospace">// tailored differently from the
default driver instance which is</FONT></P>
<P><FONT FACE="Courier, monospace">// created automatically when the
driver class is loaded by the java class loader.</FONT></P>
<P><FONT FACE="Courier, monospace">// For example, perhaps a driver
instance could be created which</FONT></P>
<P><FONT FACE="Courier, monospace">// is to behave like some older
version of the driver.</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// d = new
org.firebirdsql.jdbc.FBDriver ();</FONT></P>
<P><FONT FACE="Courier, monospace">// DriverManager.registerDriver
(d);</FONT></P>
<P><FONT FACE="Courier, monospace">// c = DriverManager.getConnection
(...);</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// Since two drivers, with
differing behavior, are now registered with</FONT></P>
<P><FONT FACE="Courier, monospace">// the driver manager, they
presumably must recognize different JDBC</FONT></P>
<P><FONT FACE="Courier, monospace">// subprotocols. For example, the
tailored driver may only recognize</FONT></P>
<P><FONT FACE="Courier, monospace">//
&quot;jdbc:interbase:old_version://...&quot;, whereas the default
driver instance</FONT></P>
<P><FONT FACE="Courier, monospace">// would recognize the standard
&quot;jdbc:interbase://...&quot;.</FONT></P>
<P><FONT FACE="Courier, monospace">// There are currently no methods,
such as the hypothetical setVersion(),</FONT></P>
<P><FONT FACE="Courier, monospace">// for tailoring an Firebird
JCA-JDBC driver so this 4th alternative is academic</FONT></P>
<P><FONT FACE="Courier, monospace">// and not necessary for Firebird
JCA-JDBC driver.</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// It is also possible to create a
tailored driver instance which</FONT></P>
<P><FONT FACE="Courier, monospace">// is *not* registered with the
driver manager as follows</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// d = new
org.firebirdsql.jdbc.FBDriver ();</FONT></P>
<P><FONT FACE="Courier, monospace">// c = d.connect (...);</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// this is the most usual case as
this does not require differing</FONT></P>
<P><FONT FACE="Courier, monospace">// JDBC subprotocols since the
connection is obtained thru the driver</FONT></P>
<P><FONT FACE="Courier, monospace">// directly rather than thru the
driver manager.</FONT></P>
<P><FONT FACE="Courier, monospace">d = new
org.firebirdsql.jdbc.FBDriver ();</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// At this point the driver should
be registered with the driver manager.</FONT></P>
<P><FONT FACE="Courier, monospace">// Try to find the registered
driver that recognizes interbase URLs...</FONT></P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><FONT FACE="Courier, monospace">// We pass the entire database
URL, but we could just pass &quot;jdbc:interbase:&quot;</FONT></P>
<P><FONT FACE="Courier, monospace">d =
java.sql.DriverManager.getDriver (databaseURL);</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Firebird
JCA-JDBC driver version &quot; +</FONT></P>
<P><FONT FACE="Courier, monospace">d.getMajorVersion () +</FONT></P>
<P><FONT FACE="Courier, monospace">&quot;.&quot; +</FONT></P>
<P><FONT FACE="Courier, monospace">d.getMinorVersion () +</FONT></P>
<P><FONT FACE="Courier, monospace">&quot; registered with driver
manager.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch (java.sql.SQLException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Unable
to find Firebird JCA-JDBC driver among the registered drivers.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">showSQLException (e);</FONT></P>
<P><FONT FACE="Courier, monospace">return;</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Advanced info: Class.forName()
loads the java class for the driver.</FONT></P>
<P><FONT FACE="Courier, monospace">// All JDBC drivers are required
to have a static clause that automatically</FONT></P>
<P><FONT FACE="Courier, monospace">// creates an instance of
themselves and registers that instance</FONT></P>
<P><FONT FACE="Courier, monospace">// with the driver manager. So
there is no need to call</FONT></P>
<P><FONT FACE="Courier, monospace">// DriverManager.registerDriver()
explicitly unless the driver allows</FONT></P>
<P><FONT FACE="Courier, monospace">// for tailored driver instances
to be created (each instance recognizing</FONT></P>
<P><FONT FACE="Courier, monospace">// a different JDBC sub-protocol).</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Now that the JayBird driver is
registered with the driver manager,</FONT></P>
<P><FONT FACE="Courier, monospace">// try to get a connection to an
employee.gdb database on this local machine</FONT></P>
<P><FONT FACE="Courier, monospace">// using one of two alternatives
for obtaining connections...</FONT></P>
<P><FONT FACE="Courier, monospace">int connectionAlternative = 1;</FONT></P>
<P><FONT FACE="Courier, monospace">switch (connectionAlternative) {</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">case 1:</FONT></P>
<P><FONT FACE="Courier, monospace">// This alternative is driver
independent;</FONT></P>
<P><FONT FACE="Courier, monospace">// the driver manager will find
the right driver for you based on the JDBC subprotocol.</FONT></P>
<P><FONT FACE="Courier, monospace">// In the past, this alternative
did not work with applets in some browsers because of a</FONT></P>
<P><FONT FACE="Courier, monospace">// bug in the driver manager. I
believe this has been fixed in the jdk 1.1 implementations.</FONT></P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><FONT FACE="Courier, monospace">c =
java.sql.DriverManager.getConnection (databaseURL, user, password);</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Connection
established.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch (java.sql.SQLException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Unable
to establish a connection through the driver manager.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">showSQLException (e);</FONT></P>
<P><FONT FACE="Courier, monospace">return;</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">break;</FONT></P>
<P><FONT FACE="Courier, monospace">case 2:</FONT></P>
<P><FONT FACE="Courier, monospace">// If you're working with a
particular driver d, which may or may not be registered,</FONT></P>
<P><FONT FACE="Courier, monospace">// you can get a connection
directly from it, bypassing the driver manager...</FONT></P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><FONT FACE="Courier, monospace">java.util.Properties
connectionProperties = new java.util.Properties ();</FONT></P>
<P><FONT FACE="Courier, monospace">connectionProperties.put (&quot;user&quot;,
user);</FONT></P>
<P><FONT FACE="Courier, monospace">connectionProperties.put
(&quot;password&quot;, password);</FONT></P>
<P><FONT FACE="Courier, monospace">c = d.connect (databaseURL,
connectionProperties);</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Connection
established.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch (java.sql.SQLException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Unable
to establish a connection through the driver.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">showSQLException (e);</FONT></P>
<P><FONT FACE="Courier, monospace">return;</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">break;</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Let's disable the default
autocommit so we can undo our changes later...</FONT></P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><FONT FACE="Courier, monospace">c.setAutoCommit (false);</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Auto-commit
is disabled.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch (java.sql.SQLException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Unable
to disable autocommit.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">showSQLException (e);</FONT></P>
<P><FONT FACE="Courier, monospace">return;</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Now that we have a connection,
let's try to get some meta data...</FONT></P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><FONT FACE="Courier, monospace">java.sql.DatabaseMetaData
dbMetaData = c.getMetaData ();</FONT></P>
<P><FONT FACE="Courier, monospace">// Ok, let's query a
driver/database capability</FONT></P>
<P><FONT FACE="Courier, monospace">if
(dbMetaData.supportsTransactions ())</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Transactions
are supported.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">else</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Transactions
are not supported.&quot;);</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// What are the views defined on
this database?</FONT></P>
<P><FONT FACE="Courier, monospace">java.sql.ResultSet tables =
dbMetaData.getTables (null, null, &quot;%&quot;, new String[]
{&quot;VIEW&quot;});</FONT></P>
<P><FONT FACE="Courier, monospace">while (tables.next ()) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println
(tables.getString (&quot;TABLE_NAME&quot;) + &quot; is a view.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">tables.close ();</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch (java.sql.SQLException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Unable
to extract database meta data.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">showSQLException (e);</FONT></P>
<P><FONT FACE="Courier, monospace">// What the heck, who needs meta
data anyway ;-(, let's continue on...</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Let's try to submit some static
SQL on the connection.</FONT></P>
<P><FONT FACE="Courier, monospace">// Note: This SQL should throw an
exception on employee.gdb because</FONT></P>
<P><FONT FACE="Courier, monospace">// of an integrity constraint
violation. </FONT>
</P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><FONT FACE="Courier, monospace">s = c.createStatement ();</FONT></P>
<P><FONT FACE="Courier, monospace">s.executeUpdate (&quot;update
employee set salary = salary + 10000&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch (java.sql.SQLException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Unable
to increase everyone's salary.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">showSQLException (e);</FONT></P>
<P><FONT FACE="Courier, monospace">// We expected this to fail, so
don't return, let's keep going...</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Let's submit some static SQL
which produces a result set.</FONT></P>
<P><FONT FACE="Courier, monospace">// Notice that the statement s is
reused with a new SQL string.</FONT></P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><FONT FACE="Courier, monospace">rs = s.executeQuery (&quot;select
full_name from employee where salary &lt; 50000&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch (java.sql.SQLException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Unable
to submit a static SQL query.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">showSQLException (e);</FONT></P>
<P><FONT FACE="Courier, monospace">// We can't go much further
without a result set, return...</FONT></P>
<P><FONT FACE="Courier, monospace">return;</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// The query above could just as
easily have been dynamic SQL,</FONT></P>
<P><FONT FACE="Courier, monospace">// eg. if the SQL had been entered
as user input.</FONT></P>
<P><FONT FACE="Courier, monospace">// As a dynamic query, we'd need
to query the result set meta data</FONT></P>
<P><FONT FACE="Courier, monospace">// for information about the
result set's columns.</FONT></P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><FONT FACE="Courier, monospace">java.sql.ResultSetMetaData
rsMetaData = rs.getMetaData ();</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;The
query executed has &quot; +</FONT></P>
<P><FONT FACE="Courier, monospace">rsMetaData.getColumnCount () +</FONT></P>
<P><FONT FACE="Courier, monospace">&quot; result columns.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Here are
the columns: &quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">for (int i = 1; i &lt;=
rsMetaData.getColumnCount (); i++) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println
(rsMetaData.getColumnName (i) +</FONT></P>
<P><FONT FACE="Courier, monospace">&quot; of type &quot; +</FONT></P>
<P><FONT FACE="Courier, monospace">rsMetaData.getColumnTypeName (i));</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch (java.sql.SQLException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Unable
to extract result set meta data.&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">showSQLException (e);</FONT></P>
<P><FONT FACE="Courier, monospace">// What the heck, who needs meta
data anyway ;-(, let's continue on...</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Ok, lets step thru the results
of the query...</FONT></P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Here are
the employee's whose salary &lt; $50,000&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">while (rs.next ()) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (rs.getString
(&quot;full_name&quot;));</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch (java.sql.SQLException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Unable
to step thru results of query&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">showSQLException (e);</FONT></P>
<P><FONT FACE="Courier, monospace">return;</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// As an exercise to the reader,
rewrite this code so that required</FONT></P>
<P><FONT FACE="Courier, monospace">// table structures are created
dynamically using executeUpdate() on DDL.</FONT></P>
<P><FONT FACE="Courier, monospace">// In this way the code will be
able to run against any database file rather</FONT></P>
<P><FONT FACE="Courier, monospace">// than just a previously setup
employee.gdb.</FONT></P>
<P><FONT FACE="Courier, monospace">// Just to get you started, you'll
want to define a method something like</FONT></P>
<P><FONT FACE="Courier, monospace">// the following...</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// private static void
createTableStructures (java.sql.Connection c) throws
java.sql.SQLException</FONT></P>
<P><FONT FACE="Courier, monospace">// {</FONT></P>
<P><FONT FACE="Courier, monospace">// // Some drivers don't force
commit on DDL, Firebird JCA-JDBC driver does,</FONT></P>
<P><FONT FACE="Courier, monospace">// // see
DatabaseMetaData.dataDefinitionCausesTransactionCommit().</FONT></P>
<P><FONT FACE="Courier, monospace">// // This is not necessary for
Firebird JCA-JDBC driver, but may be for other drivers...</FONT></P>
<P><FONT FACE="Courier, monospace">// c.setAutoCommit (true);</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// java.sql.Statement s =
c.createStatement();</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// // Drop table EMPLOYEE if it
already exists, if not that's ok too.</FONT></P>
<P><FONT FACE="Courier, monospace">// try { s.executeUpdate (&quot;drop
table EMPLOYEE&quot;); } catch (java.sql.SQLException e) {}</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// // Ok, now that we're sure the
table isn't already there, create it...</FONT></P>
<P><FONT FACE="Courier, monospace">// s.executeUpdate (&quot;create
table EMPLOYEE (...)&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// // Ok, now populate the
EMPLOYEE table...</FONT></P>
<P><FONT FACE="Courier, monospace">// s.executeUpdate (&quot;insert
into EMPLOYEE values (...)&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// s.close();</FONT></P>
<P><FONT FACE="Courier, monospace">// c.setAutoCommit (false);</FONT></P>
<P><FONT FACE="Courier, monospace">// }</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// This finally clause will be
executed even if &quot;return&quot; was called in case of any
exceptions above.</FONT></P>
<P><FONT FACE="Courier, monospace">finally {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Closing
database resources and rolling back any changes we made to the
database.&quot;);</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Now that we're all finished,
let's release database resources.</FONT></P>
<P><FONT FACE="Courier, monospace">try { if (rs!=null) rs.close (); }
catch (java.sql.SQLException e) { showSQLException (e); }</FONT></P>
<P><FONT FACE="Courier, monospace">try { if (s!=null) s.close (); }
catch (java.sql.SQLException e) { showSQLException (e); }</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Before we close the connection,
let's rollback any changes we may have made.</FONT></P>
<P><FONT FACE="Courier, monospace">try { if (c!=null) c.rollback ();
} catch (java.sql.SQLException e) { showSQLException (e); }</FONT></P>
<P><FONT FACE="Courier, monospace">try { if (c!=null) c.close (); }
catch (java.sql.SQLException e) { showSQLException (e); }</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// If you don't close your
database objects explicitly as above,</FONT></P>
<P><FONT FACE="Courier, monospace">// they may be closed by the
object's finalizer, but there's</FONT></P>
<P><FONT FACE="Courier, monospace">// no guarantee if or when the
finalizer will be called.</FONT></P>
<P><FONT FACE="Courier, monospace">// In general, object finalizers
are not called on program exit.</FONT></P>
<P><FONT FACE="Courier, monospace">// It's recommended to close your
JDBC objects explictly,</FONT></P>
<P><FONT FACE="Courier, monospace">// but you can use
System.runFinalizersOnExit(true), as at the beginning</FONT></P>
<P><FONT FACE="Courier, monospace">// of this method main(), to force
finalizers to be called before</FONT></P>
<P><FONT FACE="Courier, monospace">// program exit.</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Display an SQLException which
has occured in this application.</FONT></P>
<P><FONT FACE="Courier, monospace">private static void
showSQLException (java.sql.SQLException e)</FONT></P>
<P><FONT FACE="Courier, monospace">{</FONT></P>
<P><FONT FACE="Courier, monospace">// Notice that a SQLException is
actually a chain of SQLExceptions,</FONT></P>
<P><FONT FACE="Courier, monospace">// let's not forget to print all
of them...</FONT></P>
<P><FONT FACE="Courier, monospace">java.sql.SQLException next = e;</FONT></P>
<P><FONT FACE="Courier, monospace">while (next != null) {</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println
(next.getMessage ());</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;Error
Code: &quot; + next.getErrorCode ());</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;SQL
State: &quot; + next.getSQLState ());</FONT></P>
<P><FONT FACE="Courier, monospace">next = next.getNextException ();</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><BR><BR>
</P>
<P><FONT SIZE=4>Data Source Example:</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Original version of this file
was part of InterClient 2.01 examples</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// Copyright InterBase Software
Corporation, 1998.</FONT></P>
<P><FONT FACE="Courier, monospace">// Written by
com.inprise.interbase.interclient.r&amp;d.PaulOstler :-)</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// Code was modified by Roman
Rokytskyy to show that Firebird JCA-JDBC driver</FONT></P>
<P><FONT FACE="Courier, monospace">// does not introduce additional
complexity in normal driver usage scenario.</FONT></P>
<P><FONT FACE="Courier, monospace">//</FONT></P>
<P><FONT FACE="Courier, monospace">// An example of using a JDBC 2
Standard Extension DataSource.</FONT></P>
<P><FONT FACE="Courier, monospace">// The DataSource facility
provides an alternative to the JDBC DriverManager,</FONT></P>
<P><FONT FACE="Courier, monospace">// essentially duplicating all of
the driver manager's useful functionality.</FONT></P>
<P><FONT FACE="Courier, monospace">// Although, both mechanisms may
be used by the same application if desired,</FONT></P>
<P><FONT FACE="Courier, monospace">// JavaSoft encourages developers
to regard the DriverManager as a legacy</FONT></P>
<P><FONT FACE="Courier, monospace">// feature of the JDBC API.</FONT></P>
<P><FONT FACE="Courier, monospace">// Applications should use the
DataSource API whenever possible.</FONT></P>
<P><FONT FACE="Courier, monospace">// A JDBC implementation that is
accessed via the DataSource API is not</FONT></P>
<P><FONT FACE="Courier, monospace">// automatically registered with
the DriverManager.</FONT></P>
<P><FONT FACE="Courier, monospace">// The DriverManager, Driver, and
DriverPropertyInfo interfaces</FONT></P>
<P><FONT FACE="Courier, monospace">// may be deprecated in the
future.</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">import
org.firebirdsql.jdbc.FBWrappingDataSource;</FONT></P>
<P><FONT FACE="Courier, monospace">import
org.firebirdsql.jca.FBConnectionRequestInfo;</FONT></P>
<P><FONT FACE="Courier, monospace">import
org.firebirdsql.gds.ISCConstants;</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">public final class
DataSourceExample</FONT></P>
<P><FONT FACE="Courier, monospace">{</FONT></P>
<P><FONT FACE="Courier, monospace">static public void main (String
args[]) throws Exception</FONT></P>
<P><FONT FACE="Courier, monospace">{</FONT></P>
<P><FONT FACE="Courier, monospace">// Create an Firebird data source
manually;</FONT></P>
<P><FONT FACE="Courier, monospace">FBWrappingDataSource dataSource =
new FBWrappingDataSource();</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Set the standard properties</FONT></P>
<P><FONT FACE="Courier, monospace">dataSource.setDatabase
(&quot;localhost/3050:c:/database/employee.gdb&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">dataSource.setDescription (&quot;An
example database of employees&quot;);</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">/*</FONT></P>
<P><FONT FACE="Courier, monospace">* Following properties were not
deleted in order to show differences </FONT>
</P>
<P><FONT FACE="Courier, monospace">* between InterClient 2.01 data
source implementation and Firebird one.</FONT></P>
<P><FONT FACE="Courier, monospace">*/</FONT></P>
<P><FONT FACE="Courier, monospace">//dataSource.setDataSourceName
(&quot;Employee&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">//dataSource.setPortNumber (3060);</FONT></P>
<P><FONT FACE="Courier, monospace">//dataSource.setNetworkProtocol
(&quot;jdbc:interbase:&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">//dataSource.setRoleName (null);</FONT></P>
<P><FONT FACE="Courier, monospace">// Set the non-standard properties</FONT></P>
<P><FONT FACE="Courier, monospace">//dataSource.setCharSet
(interbase.interclient.CharacterEncodings.NONE);</FONT></P>
<P><FONT FACE="Courier, monospace">//dataSource.setSuggestedCachePages
(0);</FONT></P>
<P><FONT FACE="Courier, monospace">//dataSource.setSweepOnConnect
(false);</FONT></P>
<P><FONT FACE="Courier, monospace">/*</FONT></P>
<P><FONT FACE="Courier, monospace">* This is an example how to use
FBConnectionRequestInfo to specify</FONT></P>
<P><FONT FACE="Courier, monospace">* DPB that will be used for this
data source.</FONT></P>
<P><FONT FACE="Courier, monospace">*/</FONT></P>
<P><FONT FACE="Courier, monospace">FBConnectionRequestInfo cri =
dataSource.getConnectionRequestInfo();</FONT></P>
<P><FONT FACE="Courier, monospace">cri.setProperty(ISCConstants.isc_dpb_lc_ctype,
&quot;NONE&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">cri.setProperty(ISCConstants.isc_dpb_num_buffers,
1);</FONT></P>
<P><FONT FACE="Courier, monospace">cri.setProperty(ISCConstants.isc_dpb_sql_dialect,
3);</FONT></P>
<P><FONT FACE="Courier, monospace">dataSource.setConnectionRequestInfo(cri);</FONT></P>
<P><BR><BR>
</P>
<P><FONT FACE="Courier, monospace">// Connect to the Firebird
DataSource</FONT></P>
<P><FONT FACE="Courier, monospace">try {</FONT></P>
<P><FONT FACE="Courier, monospace">dataSource.setLoginTimeout (10);</FONT></P>
<P><FONT FACE="Courier, monospace">java.sql.Connection c =
dataSource.getConnection (&quot;sysdba&quot;, &quot;masterkey&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">// At this point, there is no
implicit driver instance</FONT></P>
<P><FONT FACE="Courier, monospace">// registered with the driver
manager!</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;got
connection&quot;);</FONT></P>
<P><FONT FACE="Courier, monospace">c.close ();</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">catch (java.sql.SQLException e) {</FONT></P>
<P><FONT FACE="Courier, monospace">e.printStackTrace();</FONT></P>
<P><FONT FACE="Courier, monospace">System.out.println (&quot;sql
exception: &quot; + e.getMessage ());</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P><FONT FACE="Courier, monospace">}</FONT></P>
<P>&nbsp;</P>
<P ALIGN=LEFT>&nbsp;</P>
</BODY>
</HTML>